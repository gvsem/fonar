{"version":3,"file":"main.js","mappings":"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","sources":["webpack://fonar-frontend/./node_modules/browser-tabs-lock/index.js","webpack://fonar-frontend/./node_modules/browser-tabs-lock/processLock.js","webpack://fonar-frontend/./node_modules/supertokens-js-override/lib/build/getProxyObject.js","webpack://fonar-frontend/./node_modules/supertokens-js-override/lib/build/index.js","webpack://fonar-frontend/./node_modules/supertokens-website/index.js","webpack://fonar-frontend/./node_modules/supertokens-website/lib/build/axios.js","webpack://fonar-frontend/./node_modules/supertokens-website/lib/build/axiosError.js","webpack://fonar-frontend/./node_modules/supertokens-website/lib/build/fetch.js","webpack://fonar-frontend/./node_modules/supertokens-website/lib/build/index.js","webpack://fonar-frontend/./node_modules/supertokens-website/lib/build/normalisedURLDomain.js","webpack://fonar-frontend/./node_modules/supertokens-website/lib/build/normalisedURLPath.js","webpack://fonar-frontend/./node_modules/supertokens-website/lib/build/processState.js","webpack://fonar-frontend/./node_modules/supertokens-website/lib/build/recipeImplementation.js","webpack://fonar-frontend/./node_modules/supertokens-website/lib/build/utils.js","webpack://fonar-frontend/./node_modules/supertokens-website/lib/build/version.js","webpack://fonar-frontend/webpack/bootstrap","webpack://fonar-frontend/webpack/runtime/compat get default export","webpack://fonar-frontend/webpack/runtime/define property getters","webpack://fonar-frontend/webpack/runtime/global","webpack://fonar-frontend/webpack/runtime/hasOwnProperty shorthand","webpack://fonar-frontend/./node_modules/@vizuaalog/bulmajs/src/Data.js","webpack://fonar-frontend/./node_modules/@vizuaalog/bulmajs/src/core.js","webpack://fonar-frontend/./node_modules/@vizuaalog/bulmajs/src/ConfigBag.js","webpack://fonar-frontend/./node_modules/@vizuaalog/bulmajs/src/plugin.js","webpack://fonar-frontend/./node_modules/@vizuaalog/bulmajs/src/dismissableComponent.js","webpack://fonar-frontend/./node_modules/@vizuaalog/bulmajs/src/plugins/notification.js","webpack://fonar-frontend/./node_modules/@vizuaalog/bulmajs/src/plugins/navbar.js","webpack://fonar-frontend/./node_modules/@vizuaalog/bulmajs/src/plugins/message.js","webpack://fonar-frontend/./node_modules/@vizuaalog/bulmajs/src/plugins/dropdown.js","webpack://fonar-frontend/./node_modules/@vizuaalog/bulmajs/src/plugins/modal.js","webpack://fonar-frontend/./node_modules/@vizuaalog/bulmajs/src/plugins/alert.js","webpack://fonar-frontend/./node_modules/@vizuaalog/bulmajs/src/plugins/file.js","webpack://fonar-frontend/./node_modules/@vizuaalog/bulmajs/src/plugins/tabs.js","webpack://fonar-frontend/./node_modules/@vizuaalog/bulmajs/src/plugins/panelTabs.js","webpack://fonar-frontend/./src/js/index.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar processLock_1 = require(\"./processLock\");\n/**\n * @author: SuperTokens (https://github.com/supertokens)\n * This library was created as a part of a larger project, SuperTokens(https://supertokens.io) - the best session management solution.\n * You can also check out our other projects on https://github.com/supertokens\n *\n * To contribute to this package visit https://github.com/supertokens/browser-tabs-lock\n * If you face any problems you can file an issue on https://github.com/supertokens/browser-tabs-lock/issues\n *\n * If you have any questions or if you just want to say hi visit https://supertokens.io/discord\n */\n/**\n * @constant\n * @type {string}\n * @default\n * @description All the locks taken by this package will have this as prefix\n*/\nvar LOCK_STORAGE_KEY = 'browser-tabs-lock-key';\n/**\n * @function delay\n * @param {number} milliseconds - How long the delay should be in terms of milliseconds\n * @returns {Promise<void>}\n */\nfunction delay(milliseconds) {\n    return new Promise(function (resolve) { return setTimeout(resolve, milliseconds); });\n}\n/**\n * @function generateRandomString\n * @params {number} length - How long the random string should be\n * @returns {string}\n * @description returns random string whose length is equal to the length passed as parameter\n */\nfunction generateRandomString(length) {\n    var CHARS = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';\n    var randomstring = '';\n    for (var i = 0; i < length; i++) {\n        var INDEX = Math.floor(Math.random() * CHARS.length);\n        randomstring += CHARS[INDEX];\n    }\n    return randomstring;\n}\n/**\n * @function getLockId\n * @returns {string}\n * @description Generates an id which will be unique for the browser tab\n */\nfunction getLockId() {\n    return Date.now().toString() + generateRandomString(15);\n}\nvar SuperTokensLock = /** @class */ (function () {\n    function SuperTokensLock() {\n        this.acquiredIatSet = new Set();\n        this.id = getLockId();\n        this.acquireLock = this.acquireLock.bind(this);\n        this.releaseLock = this.releaseLock.bind(this);\n        this.releaseLock__private__ = this.releaseLock__private__.bind(this);\n        this.waitForSomethingToChange = this.waitForSomethingToChange.bind(this);\n        this.refreshLockWhileAcquired = this.refreshLockWhileAcquired.bind(this);\n        if (SuperTokensLock.waiters === undefined) {\n            SuperTokensLock.waiters = [];\n        }\n    }\n    /**\n     * @async\n     * @memberOf Lock\n     * @function acquireLock\n     * @param {string} lockKey - Key for which the lock is being acquired\n     * @param {number} [timeout=5000] - Maximum time for which the function will wait to acquire the lock\n     * @returns {Promise<boolean>}\n     * @description Will return true if lock is being acquired, else false.\n     *              Also the lock can be acquired for maximum 10 secs\n     */\n    SuperTokensLock.prototype.acquireLock = function (lockKey, timeout) {\n        if (timeout === void 0) { timeout = 5000; }\n        return __awaiter(this, void 0, void 0, function () {\n            var iat, MAX_TIME, STORAGE_KEY, STORAGE, lockObj, TIMEOUT_KEY, lockObjPostDelay;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        iat = Date.now() + generateRandomString(4);\n                        MAX_TIME = Date.now() + timeout;\n                        STORAGE_KEY = LOCK_STORAGE_KEY + \"-\" + lockKey;\n                        STORAGE = window.localStorage;\n                        _a.label = 1;\n                    case 1:\n                        if (!(Date.now() < MAX_TIME)) return [3 /*break*/, 8];\n                        return [4 /*yield*/, delay(30)];\n                    case 2:\n                        _a.sent();\n                        lockObj = STORAGE.getItem(STORAGE_KEY);\n                        if (!(lockObj === null)) return [3 /*break*/, 5];\n                        TIMEOUT_KEY = this.id + \"-\" + lockKey + \"-\" + iat;\n                        // there is a problem if setItem happens at the exact same time for 2 different processes.. so we add some random delay here.\n                        return [4 /*yield*/, delay(Math.floor(Math.random() * 25))];\n                    case 3:\n                        // there is a problem if setItem happens at the exact same time for 2 different processes.. so we add some random delay here.\n                        _a.sent();\n                        STORAGE.setItem(STORAGE_KEY, JSON.stringify({\n                            id: this.id,\n                            iat: iat,\n                            timeoutKey: TIMEOUT_KEY,\n                            timeAcquired: Date.now(),\n                            timeRefreshed: Date.now()\n                        }));\n                        return [4 /*yield*/, delay(30)];\n                    case 4:\n                        _a.sent(); // this is to prevent race conditions. This time must be more than the time it takes for storage.setItem\n                        lockObjPostDelay = STORAGE.getItem(STORAGE_KEY);\n                        if (lockObjPostDelay !== null) {\n                            lockObjPostDelay = JSON.parse(lockObjPostDelay);\n                            if (lockObjPostDelay.id === this.id && lockObjPostDelay.iat === iat) {\n                                this.acquiredIatSet.add(iat);\n                                this.refreshLockWhileAcquired(STORAGE_KEY, iat);\n                                return [2 /*return*/, true];\n                            }\n                        }\n                        return [3 /*break*/, 7];\n                    case 5:\n                        SuperTokensLock.lockCorrector();\n                        return [4 /*yield*/, this.waitForSomethingToChange(MAX_TIME)];\n                    case 6:\n                        _a.sent();\n                        _a.label = 7;\n                    case 7:\n                        iat = Date.now() + generateRandomString(4);\n                        return [3 /*break*/, 1];\n                    case 8: return [2 /*return*/, false];\n                }\n            });\n        });\n    };\n    SuperTokensLock.prototype.refreshLockWhileAcquired = function (storageKey, iat) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                setTimeout(function () { return __awaiter(_this, void 0, void 0, function () {\n                    var STORAGE, lockObj;\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0: return [4 /*yield*/, processLock_1.default().lock(iat)];\n                            case 1:\n                                _a.sent();\n                                if (!this.acquiredIatSet.has(iat)) {\n                                    processLock_1.default().unlock(iat);\n                                    return [2 /*return*/];\n                                }\n                                STORAGE = window.localStorage;\n                                lockObj = STORAGE.getItem(storageKey);\n                                if (lockObj !== null) {\n                                    lockObj = JSON.parse(lockObj);\n                                    lockObj.timeRefreshed = Date.now();\n                                    STORAGE.setItem(storageKey, JSON.stringify(lockObj));\n                                    processLock_1.default().unlock(iat);\n                                }\n                                else {\n                                    processLock_1.default().unlock(iat);\n                                    return [2 /*return*/];\n                                }\n                                this.refreshLockWhileAcquired(storageKey, iat);\n                                return [2 /*return*/];\n                        }\n                    });\n                }); }, 1000);\n                return [2 /*return*/];\n            });\n        });\n    };\n    SuperTokensLock.prototype.waitForSomethingToChange = function (MAX_TIME) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, new Promise(function (resolve) {\n                            var resolvedCalled = false;\n                            var startedAt = Date.now();\n                            var MIN_TIME_TO_WAIT = 50; // ms\n                            var removedListeners = false;\n                            function stopWaiting() {\n                                if (!removedListeners) {\n                                    window.removeEventListener('storage', stopWaiting);\n                                    SuperTokensLock.removeFromWaiting(stopWaiting);\n                                    clearTimeout(timeOutId);\n                                    removedListeners = true;\n                                }\n                                if (!resolvedCalled) {\n                                    resolvedCalled = true;\n                                    var timeToWait = MIN_TIME_TO_WAIT - (Date.now() - startedAt);\n                                    if (timeToWait > 0) {\n                                        setTimeout(resolve, timeToWait);\n                                    }\n                                    else {\n                                        resolve();\n                                    }\n                                }\n                            }\n                            window.addEventListener('storage', stopWaiting);\n                            SuperTokensLock.addToWaiting(stopWaiting);\n                            var timeOutId = setTimeout(stopWaiting, Math.max(0, MAX_TIME - Date.now()));\n                        })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SuperTokensLock.addToWaiting = function (func) {\n        this.removeFromWaiting(func);\n        if (SuperTokensLock.waiters === undefined) {\n            return;\n        }\n        SuperTokensLock.waiters.push(func);\n    };\n    SuperTokensLock.removeFromWaiting = function (func) {\n        if (SuperTokensLock.waiters === undefined) {\n            return;\n        }\n        SuperTokensLock.waiters = SuperTokensLock.waiters.filter(function (i) { return i !== func; });\n    };\n    SuperTokensLock.notifyWaiters = function () {\n        if (SuperTokensLock.waiters === undefined) {\n            return;\n        }\n        var waiters = SuperTokensLock.waiters.slice(); // so that if Lock.waiters is changed it's ok.\n        waiters.forEach(function (i) { return i(); });\n    };\n    /**\n     * @function releaseLock\n     * @memberOf Lock\n     * @param {string} lockKey - Key for which lock is being released\n     * @returns {void}\n     * @description Release a lock.\n     */\n    SuperTokensLock.prototype.releaseLock = function (lockKey) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.releaseLock__private__(lockKey)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    /**\n     * @function releaseLock\n     * @memberOf Lock\n     * @param {string} lockKey - Key for which lock is being released\n     * @returns {void}\n     * @description Release a lock.\n     */\n    SuperTokensLock.prototype.releaseLock__private__ = function (lockKey) {\n        return __awaiter(this, void 0, void 0, function () {\n            var STORAGE, STORAGE_KEY, lockObj;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        STORAGE = window.localStorage;\n                        STORAGE_KEY = LOCK_STORAGE_KEY + \"-\" + lockKey;\n                        lockObj = STORAGE.getItem(STORAGE_KEY);\n                        if (lockObj === null) {\n                            return [2 /*return*/];\n                        }\n                        lockObj = JSON.parse(lockObj);\n                        if (!(lockObj.id === this.id)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, processLock_1.default().lock(lockObj.iat)];\n                    case 1:\n                        _a.sent();\n                        this.acquiredIatSet.delete(lockObj.iat);\n                        STORAGE.removeItem(STORAGE_KEY);\n                        processLock_1.default().unlock(lockObj.iat);\n                        SuperTokensLock.notifyWaiters();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * @function lockCorrector\n     * @returns {void}\n     * @description If a lock is acquired by a tab and the tab is closed before the lock is\n     *              released, this function will release those locks\n     */\n    SuperTokensLock.lockCorrector = function () {\n        var MIN_ALLOWED_TIME = Date.now() - 5000;\n        var STORAGE = window.localStorage;\n        var KEYS = Object.keys(STORAGE);\n        var notifyWaiters = false;\n        for (var i = 0; i < KEYS.length; i++) {\n            var LOCK_KEY = KEYS[i];\n            if (LOCK_KEY.includes(LOCK_STORAGE_KEY)) {\n                var lockObj = STORAGE.getItem(LOCK_KEY);\n                if (lockObj !== null) {\n                    lockObj = JSON.parse(lockObj);\n                    if ((lockObj.timeRefreshed === undefined && lockObj.timeAcquired < MIN_ALLOWED_TIME) ||\n                        (lockObj.timeRefreshed !== undefined && lockObj.timeRefreshed < MIN_ALLOWED_TIME)) {\n                        STORAGE.removeItem(LOCK_KEY);\n                        notifyWaiters = true;\n                    }\n                }\n            }\n        }\n        if (notifyWaiters) {\n            SuperTokensLock.notifyWaiters();\n        }\n    };\n    SuperTokensLock.waiters = undefined;\n    return SuperTokensLock;\n}());\nexports.default = SuperTokensLock;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ProcessLocking = /** @class */ (function () {\n    function ProcessLocking() {\n        var _this = this;\n        this.locked = new Map();\n        this.addToLocked = function (key, toAdd) {\n            var callbacks = _this.locked.get(key);\n            if (callbacks === undefined) {\n                if (toAdd === undefined) {\n                    _this.locked.set(key, []);\n                }\n                else {\n                    _this.locked.set(key, [toAdd]);\n                }\n            }\n            else {\n                if (toAdd !== undefined) {\n                    callbacks.unshift(toAdd);\n                    _this.locked.set(key, callbacks);\n                }\n            }\n        };\n        this.isLocked = function (key) {\n            return _this.locked.has(key);\n        };\n        this.lock = function (key) {\n            return new Promise(function (resolve, reject) {\n                if (_this.isLocked(key)) {\n                    _this.addToLocked(key, resolve);\n                }\n                else {\n                    _this.addToLocked(key);\n                    resolve();\n                }\n            });\n        };\n        this.unlock = function (key) {\n            var callbacks = _this.locked.get(key);\n            if (callbacks === undefined || callbacks.length === 0) {\n                _this.locked.delete(key);\n                return;\n            }\n            var toCall = callbacks.pop();\n            _this.locked.set(key, callbacks);\n            if (toCall !== undefined) {\n                setTimeout(toCall, 0);\n            }\n        };\n    }\n    ProcessLocking.getInstance = function () {\n        if (ProcessLocking.instance === undefined) {\n            ProcessLocking.instance = new ProcessLocking();\n        }\n        return ProcessLocking.instance;\n    };\n    return ProcessLocking;\n}());\nfunction getLock() {\n    return ProcessLocking.getInstance();\n}\nexports.default = getLock;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getProxyObject = void 0;\nfunction getProxyObject(orig) {\n    var ret = __assign(__assign({}, orig), { _call: function (_, __) {\n            throw new Error(\"This function should only be called through the recipe object\");\n        } });\n    var keys = Object.keys(ret);\n    var _loop_1 = function (k) {\n        if (k !== \"_call\") {\n            ret[k] = function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return this._call(k, args);\n            };\n        }\n    };\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var k = keys_1[_i];\n        _loop_1(k);\n    }\n    return ret;\n}\nexports.getProxyObject = getProxyObject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OverrideableBuilder = void 0;\nvar getProxyObject_1 = require(\"./getProxyObject\");\nvar OverrideableBuilder = /** @class */ (function () {\n    function OverrideableBuilder(originalImplementation) {\n        this.layers = [originalImplementation];\n        this.proxies = [];\n    }\n    OverrideableBuilder.prototype.override = function (overrideFunc) {\n        var proxy = (0, getProxyObject_1.getProxyObject)(this.layers[0]);\n        var layer = overrideFunc(proxy, this);\n        for (var _i = 0, _a = Object.keys(this.layers[0]); _i < _a.length; _i++) {\n            var key = _a[_i];\n            if (layer[key] === proxy[key] || key === \"_call\") {\n                delete layer[key];\n            }\n            else if (layer[key] === undefined) {\n                layer[key] = null;\n            }\n        }\n        this.layers.push(layer);\n        this.proxies.push(proxy);\n        return this;\n    };\n    OverrideableBuilder.prototype.build = function () {\n        var _this = this;\n        if (this.result) {\n            return this.result;\n        }\n        this.result = {};\n        for (var _i = 0, _a = this.layers; _i < _a.length; _i++) {\n            var layer = _a[_i];\n            for (var _b = 0, _c = Object.keys(layer); _b < _c.length; _b++) {\n                var key = _c[_b];\n                var override = layer[key];\n                if (override !== undefined) {\n                    if (override === null) {\n                        this.result[key] = undefined;\n                    }\n                    else if (typeof override === \"function\") {\n                        this.result[key] = override.bind(this.result);\n                    }\n                    else {\n                        this.result[key] = override;\n                    }\n                }\n            }\n        }\n        var _loop_1 = function (proxyInd) {\n            var proxy = this_1.proxies[proxyInd];\n            proxy._call = function (fname, args) {\n                for (var i = proxyInd; i >= 0; --i) {\n                    var func = _this.layers[i][fname];\n                    if (func !== undefined && func !== null) {\n                        return func.bind(_this.result).apply(void 0, args);\n                    }\n                }\n            };\n        };\n        var this_1 = this;\n        for (var proxyInd = 0; proxyInd < this.proxies.length; ++proxyInd) {\n            _loop_1(proxyInd);\n        }\n        return this.result;\n    };\n    return OverrideableBuilder;\n}());\nexports.OverrideableBuilder = OverrideableBuilder;\nexports.default = OverrideableBuilder;\n","/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n * \n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * \n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License. \n*/\n\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nexports.__esModule = true;\n__export(require(\"./lib/build\"));\n","\"use strict\";\nvar __assign =\n    (this && this.__assign) ||\n    function() {\n        __assign =\n            Object.assign ||\n            function(t) {\n                for (var s, i = 1, n = arguments.length; i < n; i++) {\n                    s = arguments[i];\n                    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n                }\n                return t;\n            };\n        return __assign.apply(this, arguments);\n    };\nvar __awaiter =\n    (this && this.__awaiter) ||\n    function(thisArg, _arguments, P, generator) {\n        function adopt(value) {\n            return value instanceof P\n                ? value\n                : new P(function(resolve) {\n                      resolve(value);\n                  });\n        }\n        return new (P || (P = Promise))(function(resolve, reject) {\n            function fulfilled(value) {\n                try {\n                    step(generator.next(value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function rejected(value) {\n                try {\n                    step(generator[\"throw\"](value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function step(result) {\n                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n            }\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\n        });\n    };\nvar __generator =\n    (this && this.__generator) ||\n    function(thisArg, body) {\n        var _ = {\n                label: 0,\n                sent: function() {\n                    if (t[0] & 1) throw t[1];\n                    return t[1];\n                },\n                trys: [],\n                ops: []\n            },\n            f,\n            y,\n            t,\n            g;\n        return (\n            (g = { next: verb(0), throw: verb(1), return: verb(2) }),\n            typeof Symbol === \"function\" &&\n                (g[Symbol.iterator] = function() {\n                    return this;\n                }),\n            g\n        );\n        function verb(n) {\n            return function(v) {\n                return step([n, v]);\n            };\n        }\n        function step(op) {\n            if (f) throw new TypeError(\"Generator is already executing.\");\n            while (_)\n                try {\n                    if (\n                        ((f = 1),\n                        y &&\n                            (t =\n                                op[0] & 2\n                                    ? y[\"return\"]\n                                    : op[0]\n                                    ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0)\n                                    : y.next) &&\n                            !(t = t.call(y, op[1])).done)\n                    )\n                        return t;\n                    if (((y = 0), t)) op = [op[0] & 2, t.value];\n                    switch (op[0]) {\n                        case 0:\n                        case 1:\n                            t = op;\n                            break;\n                        case 4:\n                            _.label++;\n                            return { value: op[1], done: false };\n                        case 5:\n                            _.label++;\n                            y = op[1];\n                            op = [0];\n                            continue;\n                        case 7:\n                            op = _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                        default:\n                            if (\n                                !((t = _.trys), (t = t.length > 0 && t[t.length - 1])) &&\n                                (op[0] === 6 || op[0] === 2)\n                            ) {\n                                _ = 0;\n                                continue;\n                            }\n                            if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {\n                                _.label = op[1];\n                                break;\n                            }\n                            if (op[0] === 6 && _.label < t[1]) {\n                                _.label = t[1];\n                                t = op;\n                                break;\n                            }\n                            if (t && _.label < t[2]) {\n                                _.label = t[2];\n                                _.ops.push(op);\n                                break;\n                            }\n                            if (t[2]) _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                    }\n                    op = body.call(thisArg, _);\n                } catch (e) {\n                    op = [6, e];\n                    y = 0;\n                } finally {\n                    f = t = 0;\n                }\n            if (op[0] & 5) throw op[1];\n            return { value: op[0] ? op[1] : void 0, done: true };\n        }\n    };\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar axiosError_1 = require(\"./axiosError\");\nvar fetch_1 = require(\"./fetch\");\nvar processState_1 = require(\"./processState\");\nvar utils_1 = require(\"./utils\");\nfunction getUrlFromConfig(config) {\n    var url = config.url === undefined ? \"\" : config.url;\n    var baseURL = config.baseURL;\n    if (baseURL !== undefined) {\n        if (url.charAt(0) === \"/\" && baseURL.charAt(baseURL.length - 1) === \"/\") {\n            url = baseURL + url.substr(1);\n        } else if (url.charAt(0) !== \"/\" && baseURL.charAt(baseURL.length - 1) !== \"/\") {\n            url = baseURL + \"/\" + url;\n        } else {\n            url = baseURL + url;\n        }\n    }\n    return url;\n}\nfunction interceptorFunctionRequestFulfilled(config) {\n    return __awaiter(this, void 0, void 0, function() {\n        var url, doNotDoInterception, preRequestIdToken, configWithAntiCsrf, antiCsrfToken;\n        return __generator(this, function(_a) {\n            switch (_a.label) {\n                case 0:\n                    url = getUrlFromConfig(config);\n                    doNotDoInterception = false;\n                    try {\n                        doNotDoInterception =\n                            typeof url === \"string\" &&\n                            !utils_1.shouldDoInterceptionBasedOnUrl(\n                                url,\n                                fetch_1.default.config.apiDomain,\n                                fetch_1.default.config.cookieDomain\n                            );\n                    } catch (err) {\n                        if (err.message === \"Please provide a valid domain name\") {\n                            // .origin gives the port as well..\n                            doNotDoInterception = !utils_1.shouldDoInterceptionBasedOnUrl(\n                                window.location.origin,\n                                fetch_1.default.config.apiDomain,\n                                fetch_1.default.config.cookieDomain\n                            );\n                        } else {\n                            throw err;\n                        }\n                    }\n                    if (doNotDoInterception) {\n                        // this check means that if you are using axios via inteceptor, then we only do the refresh steps if you are calling your APIs.\n                        return [2 /*return*/, config];\n                    }\n                    processState_1.ProcessState.getInstance().addState(\n                        processState_1.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST\n                    );\n                    return [4 /*yield*/, fetch_1.getIdRefreshToken(true)];\n                case 1:\n                    preRequestIdToken = _a.sent();\n                    configWithAntiCsrf = config;\n                    if (!(preRequestIdToken.status === \"EXISTS\")) return [3 /*break*/, 3];\n                    return [4 /*yield*/, fetch_1.AntiCsrfToken.getToken(preRequestIdToken.token)];\n                case 2:\n                    antiCsrfToken = _a.sent();\n                    if (antiCsrfToken !== undefined) {\n                        configWithAntiCsrf = __assign(__assign({}, configWithAntiCsrf), {\n                            headers:\n                                configWithAntiCsrf === undefined\n                                    ? {\n                                          \"anti-csrf\": antiCsrfToken\n                                      }\n                                    : __assign(__assign({}, configWithAntiCsrf.headers), { \"anti-csrf\": antiCsrfToken })\n                        });\n                    }\n                    _a.label = 3;\n                case 3:\n                    if (fetch_1.default.config.autoAddCredentials && configWithAntiCsrf.withCredentials === undefined) {\n                        configWithAntiCsrf = __assign(__assign({}, configWithAntiCsrf), { withCredentials: true });\n                    }\n                    // adding rid for anti-csrf protection: Anti-csrf via custom header\n                    configWithAntiCsrf = __assign(__assign({}, configWithAntiCsrf), {\n                        headers:\n                            configWithAntiCsrf === undefined\n                                ? {\n                                      rid: \"anti-csrf\"\n                                  }\n                                : __assign({ rid: \"anti-csrf\" }, configWithAntiCsrf.headers)\n                    });\n                    return [2 /*return*/, configWithAntiCsrf];\n            }\n        });\n    });\n}\nexports.interceptorFunctionRequestFulfilled = interceptorFunctionRequestFulfilled;\nfunction responseInterceptor(axiosInstance) {\n    var _this = this;\n    return function(response) {\n        return __awaiter(_this, void 0, void 0, function() {\n            var doNotDoInterception, url, idRefreshToken, config, antiCsrfToken, tok, frontToken, _a;\n            return __generator(this, function(_b) {\n                switch (_b.label) {\n                    case 0:\n                        doNotDoInterception = false;\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, , 11, 17]);\n                        if (!fetch_1.default.initCalled) {\n                            throw new Error(\"init function not called\");\n                        }\n                        url = getUrlFromConfig(response.config);\n                        try {\n                            doNotDoInterception =\n                                typeof url === \"string\" &&\n                                !utils_1.shouldDoInterceptionBasedOnUrl(\n                                    url,\n                                    fetch_1.default.config.apiDomain,\n                                    fetch_1.default.config.cookieDomain\n                                );\n                        } catch (err) {\n                            if (err.message === \"Please provide a valid domain name\") {\n                                // .origin gives the port as well..\n                                doNotDoInterception = !utils_1.shouldDoInterceptionBasedOnUrl(\n                                    window.location.origin,\n                                    fetch_1.default.config.apiDomain,\n                                    fetch_1.default.config.cookieDomain\n                                );\n                            } else {\n                                throw err;\n                            }\n                        }\n                        if (doNotDoInterception) {\n                            // this check means that if you are using axios via inteceptor, then we only do the refresh steps if you are calling your APIs.\n                            return [2 /*return*/, response];\n                        }\n                        processState_1.ProcessState.getInstance().addState(\n                            processState_1.PROCESS_STATE.CALLING_INTERCEPTION_RESPONSE\n                        );\n                        idRefreshToken = response.headers[\"id-refresh-token\"];\n                        if (!(idRefreshToken !== undefined)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, fetch_1.setIdRefreshToken(idRefreshToken, response.status)];\n                    case 2:\n                        _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        if (!(response.status === fetch_1.default.config.sessionExpiredStatusCode))\n                            return [3 /*break*/, 4];\n                        config = response.config;\n                        return [\n                            2 /*return*/,\n                            AuthHttpRequest.doRequest(\n                                function(config) {\n                                    // we create an instance since we don't want to intercept this.\n                                    // const instance = axios.create();\n                                    // return instance(config);\n                                    return axiosInstance(config);\n                                },\n                                config,\n                                url,\n                                response,\n                                true\n                            )\n                        ];\n                    case 4:\n                        antiCsrfToken = response.headers[\"anti-csrf\"];\n                        if (!(antiCsrfToken !== undefined)) return [3 /*break*/, 7];\n                        return [4 /*yield*/, fetch_1.getIdRefreshToken(true)];\n                    case 5:\n                        tok = _b.sent();\n                        if (!(tok.status === \"EXISTS\")) return [3 /*break*/, 7];\n                        return [4 /*yield*/, fetch_1.AntiCsrfToken.setItem(tok.token, antiCsrfToken)];\n                    case 6:\n                        _b.sent();\n                        _b.label = 7;\n                    case 7:\n                        frontToken = response.headers[\"front-token\"];\n                        if (!(frontToken !== undefined)) return [3 /*break*/, 9];\n                        return [4 /*yield*/, fetch_1.FrontToken.setItem(frontToken)];\n                    case 8:\n                        _b.sent();\n                        _b.label = 9;\n                    case 9:\n                        return [2 /*return*/, response];\n                    case 10:\n                        return [3 /*break*/, 17];\n                    case 11:\n                        _a = !doNotDoInterception;\n                        if (!_a) return [3 /*break*/, 13];\n                        return [4 /*yield*/, fetch_1.getIdRefreshToken(true)];\n                    case 12:\n                        // we do not call doesSessionExist here cause the user might override that\n                        // function here and then it may break the logic of our original implementation.\n                        _a = !(_b.sent().status === \"EXISTS\");\n                        _b.label = 13;\n                    case 13:\n                        if (!_a) return [3 /*break*/, 16];\n                        return [4 /*yield*/, fetch_1.AntiCsrfToken.removeToken()];\n                    case 14:\n                        _b.sent();\n                        return [4 /*yield*/, fetch_1.FrontToken.removeToken()];\n                    case 15:\n                        _b.sent();\n                        _b.label = 16;\n                    case 16:\n                        return [7 /*endfinally*/];\n                    case 17:\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n}\nexports.responseInterceptor = responseInterceptor;\nfunction responseErrorInterceptor(axiosInstance) {\n    return function(error) {\n        if (error.response !== undefined && error.response.status === fetch_1.default.config.sessionExpiredStatusCode) {\n            var config = error.config;\n            return AuthHttpRequest.doRequest(\n                function(config) {\n                    // we create an instance since we don't want to intercept this.\n                    // const instance = axios.create();\n                    // return instance(config);\n                    return axiosInstance(config);\n                },\n                config,\n                getUrlFromConfig(config),\n                undefined,\n                error,\n                true\n            );\n        } else {\n            throw error;\n        }\n    };\n}\nexports.responseErrorInterceptor = responseErrorInterceptor;\n/**\n * @class AuthHttpRequest\n * @description wrapper for common http methods.\n */\nvar AuthHttpRequest = /** @class */ (function() {\n    function AuthHttpRequest() {}\n    /**\n     * @description sends the actual http request and returns a response if successful/\n     * If not successful due to session expiry reasons, it\n     * attempts to call the refresh token API and if that is successful, calls this API again.\n     * @throws Error\n     */\n    AuthHttpRequest.doRequest = function(httpCall, config, url, prevResponse, prevError, viaInterceptor) {\n        if (viaInterceptor === void 0) {\n            viaInterceptor = false;\n        }\n        return __awaiter(void 0, void 0, void 0, function() {\n            var doNotDoInterception,\n                returnObj,\n                preRequestIdToken,\n                configWithAntiCsrf,\n                antiCsrfToken,\n                localPrevError,\n                localPrevResponse,\n                response,\n                _a,\n                idRefreshToken,\n                refreshResult,\n                _b,\n                antiCsrfToken,\n                tok,\n                frontToken,\n                err_1,\n                idRefreshToken,\n                refreshResult,\n                _c,\n                postRequestIdToken;\n            return __generator(this, function(_d) {\n                switch (_d.label) {\n                    case 0:\n                        if (!fetch_1.default.initCalled) {\n                            throw Error(\"init function not called\");\n                        }\n                        doNotDoInterception = false;\n                        try {\n                            doNotDoInterception =\n                                typeof url === \"string\" &&\n                                !utils_1.shouldDoInterceptionBasedOnUrl(\n                                    url,\n                                    fetch_1.default.config.apiDomain,\n                                    fetch_1.default.config.cookieDomain\n                                ) &&\n                                viaInterceptor;\n                        } catch (err) {\n                            if (err.message === \"Please provide a valid domain name\") {\n                                // .origin gives the port as well..\n                                doNotDoInterception =\n                                    !utils_1.shouldDoInterceptionBasedOnUrl(\n                                        window.location.origin,\n                                        fetch_1.default.config.apiDomain,\n                                        fetch_1.default.config.cookieDomain\n                                    ) && viaInterceptor;\n                            } else {\n                                throw err;\n                            }\n                        }\n                        if (!doNotDoInterception) return [3 /*break*/, 2];\n                        if (prevError !== undefined) {\n                            throw prevError;\n                        } else if (prevResponse !== undefined) {\n                            return [2 /*return*/, prevResponse];\n                        }\n                        return [4 /*yield*/, httpCall(config)];\n                    case 1:\n                        return [2 /*return*/, _d.sent()];\n                    case 2:\n                        _d.trys.push([2, , 40, 45]);\n                        returnObj = undefined;\n                        _d.label = 3;\n                    case 3:\n                        if (!true) return [3 /*break*/, 39];\n                        return [4 /*yield*/, fetch_1.getIdRefreshToken(true)];\n                    case 4:\n                        preRequestIdToken = _d.sent();\n                        configWithAntiCsrf = config;\n                        if (!(preRequestIdToken.status === \"EXISTS\")) return [3 /*break*/, 6];\n                        return [4 /*yield*/, fetch_1.AntiCsrfToken.getToken(preRequestIdToken.token)];\n                    case 5:\n                        antiCsrfToken = _d.sent();\n                        if (antiCsrfToken !== undefined) {\n                            configWithAntiCsrf = __assign(__assign({}, configWithAntiCsrf), {\n                                headers:\n                                    configWithAntiCsrf === undefined\n                                        ? {\n                                              \"anti-csrf\": antiCsrfToken\n                                          }\n                                        : __assign(__assign({}, configWithAntiCsrf.headers), {\n                                              \"anti-csrf\": antiCsrfToken\n                                          })\n                            });\n                        }\n                        _d.label = 6;\n                    case 6:\n                        if (\n                            fetch_1.default.config.autoAddCredentials &&\n                            configWithAntiCsrf.withCredentials === undefined\n                        ) {\n                            configWithAntiCsrf = __assign(__assign({}, configWithAntiCsrf), { withCredentials: true });\n                        }\n                        // adding rid for anti-csrf protection: Anti-csrf via custom header\n                        configWithAntiCsrf = __assign(__assign({}, configWithAntiCsrf), {\n                            headers:\n                                configWithAntiCsrf === undefined\n                                    ? {\n                                          rid: \"anti-csrf\"\n                                      }\n                                    : __assign({ rid: \"anti-csrf\" }, configWithAntiCsrf.headers)\n                        });\n                        _d.label = 7;\n                    case 7:\n                        _d.trys.push([7, 26, , 38]);\n                        localPrevError = prevError;\n                        localPrevResponse = prevResponse;\n                        prevError = undefined;\n                        prevResponse = undefined;\n                        if (localPrevError !== undefined) {\n                            throw localPrevError;\n                        }\n                        if (!(localPrevResponse === undefined)) return [3 /*break*/, 9];\n                        return [4 /*yield*/, httpCall(configWithAntiCsrf)];\n                    case 8:\n                        _a = _d.sent();\n                        return [3 /*break*/, 10];\n                    case 9:\n                        _a = localPrevResponse;\n                        _d.label = 10;\n                    case 10:\n                        response = _a;\n                        idRefreshToken = response.headers[\"id-refresh-token\"];\n                        if (!(idRefreshToken !== undefined)) return [3 /*break*/, 12];\n                        return [4 /*yield*/, fetch_1.setIdRefreshToken(idRefreshToken, response.status)];\n                    case 11:\n                        _d.sent();\n                        _d.label = 12;\n                    case 12:\n                        if (!(response.status === fetch_1.default.config.sessionExpiredStatusCode))\n                            return [3 /*break*/, 19];\n                        return [4 /*yield*/, fetch_1.onUnauthorisedResponse(preRequestIdToken)];\n                    case 13:\n                        refreshResult = _d.sent();\n                        if (!(refreshResult.result !== \"RETRY\")) return [3 /*break*/, 18];\n                        if (!refreshResult.error) return [3 /*break*/, 15];\n                        return [4 /*yield*/, axiosError_1.createAxiosErrorFromFetchResp(refreshResult.error)];\n                    case 14:\n                        _b = _d.sent();\n                        return [3 /*break*/, 17];\n                    case 15:\n                        return [4 /*yield*/, axiosError_1.createAxiosErrorFromAxiosResp(response)];\n                    case 16:\n                        _b = _d.sent();\n                        _d.label = 17;\n                    case 17:\n                        // Returning refreshResult.error as an Axios Error if we attempted a refresh\n                        // Returning the response to the original response as an error if we did not attempt refreshing\n                        returnObj = _b;\n                        return [3 /*break*/, 39];\n                    case 18:\n                        return [3 /*break*/, 25];\n                    case 19:\n                        antiCsrfToken = response.headers[\"anti-csrf\"];\n                        if (!(antiCsrfToken !== undefined)) return [3 /*break*/, 22];\n                        return [4 /*yield*/, fetch_1.getIdRefreshToken(true)];\n                    case 20:\n                        tok = _d.sent();\n                        if (!(tok.status === \"EXISTS\")) return [3 /*break*/, 22];\n                        return [4 /*yield*/, fetch_1.AntiCsrfToken.setItem(tok.token, antiCsrfToken)];\n                    case 21:\n                        _d.sent();\n                        _d.label = 22;\n                    case 22:\n                        frontToken = response.headers[\"front-token\"];\n                        if (!(frontToken !== undefined)) return [3 /*break*/, 24];\n                        return [4 /*yield*/, fetch_1.FrontToken.setItem(frontToken)];\n                    case 23:\n                        _d.sent();\n                        _d.label = 24;\n                    case 24:\n                        return [2 /*return*/, response];\n                    case 25:\n                        return [3 /*break*/, 38];\n                    case 26:\n                        err_1 = _d.sent();\n                        if (!(err_1.response !== undefined)) return [3 /*break*/, 36];\n                        idRefreshToken = err_1.response.headers[\"id-refresh-token\"];\n                        if (!(idRefreshToken !== undefined)) return [3 /*break*/, 28];\n                        return [4 /*yield*/, fetch_1.setIdRefreshToken(idRefreshToken, err_1.response.status)];\n                    case 27:\n                        _d.sent();\n                        _d.label = 28;\n                    case 28:\n                        if (!(err_1.response.status === fetch_1.default.config.sessionExpiredStatusCode))\n                            return [3 /*break*/, 34];\n                        return [4 /*yield*/, fetch_1.onUnauthorisedResponse(preRequestIdToken)];\n                    case 29:\n                        refreshResult = _d.sent();\n                        if (!(refreshResult.result !== \"RETRY\")) return [3 /*break*/, 33];\n                        if (!(refreshResult.error !== undefined)) return [3 /*break*/, 31];\n                        return [4 /*yield*/, axiosError_1.createAxiosErrorFromFetchResp(refreshResult.error)];\n                    case 30:\n                        _c = _d.sent();\n                        return [3 /*break*/, 32];\n                    case 31:\n                        _c = err_1;\n                        _d.label = 32;\n                    case 32:\n                        // Returning refreshResult.error as an Axios Error if we attempted a refresh\n                        // Returning the original error if we did not attempt refreshing\n                        returnObj = _c;\n                        return [3 /*break*/, 39];\n                    case 33:\n                        return [3 /*break*/, 35];\n                    case 34:\n                        throw err_1;\n                    case 35:\n                        return [3 /*break*/, 37];\n                    case 36:\n                        throw err_1;\n                    case 37:\n                        return [3 /*break*/, 38];\n                    case 38:\n                        return [3 /*break*/, 3];\n                    case 39:\n                        // if it comes here, means we called break. which happens only if we have logged out.\n                        // which means it's a 401, so we throw\n                        throw returnObj;\n                    case 40:\n                        return [4 /*yield*/, fetch_1.getIdRefreshToken(false)];\n                    case 41:\n                        postRequestIdToken = _d.sent();\n                        if (!(postRequestIdToken.status === \"NOT_EXISTS\")) return [3 /*break*/, 44];\n                        return [4 /*yield*/, fetch_1.AntiCsrfToken.removeToken()];\n                    case 42:\n                        _d.sent();\n                        return [4 /*yield*/, fetch_1.FrontToken.removeToken()];\n                    case 43:\n                        _d.sent();\n                        _d.label = 44;\n                    case 44:\n                        return [7 /*endfinally*/];\n                    case 45:\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return AuthHttpRequest;\n})();\nexports.default = AuthHttpRequest;\n","\"use strict\";\nvar __awaiter =\n    (this && this.__awaiter) ||\n    function(thisArg, _arguments, P, generator) {\n        function adopt(value) {\n            return value instanceof P\n                ? value\n                : new P(function(resolve) {\n                      resolve(value);\n                  });\n        }\n        return new (P || (P = Promise))(function(resolve, reject) {\n            function fulfilled(value) {\n                try {\n                    step(generator.next(value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function rejected(value) {\n                try {\n                    step(generator[\"throw\"](value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function step(result) {\n                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n            }\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\n        });\n    };\nvar __generator =\n    (this && this.__generator) ||\n    function(thisArg, body) {\n        var _ = {\n                label: 0,\n                sent: function() {\n                    if (t[0] & 1) throw t[1];\n                    return t[1];\n                },\n                trys: [],\n                ops: []\n            },\n            f,\n            y,\n            t,\n            g;\n        return (\n            (g = { next: verb(0), throw: verb(1), return: verb(2) }),\n            typeof Symbol === \"function\" &&\n                (g[Symbol.iterator] = function() {\n                    return this;\n                }),\n            g\n        );\n        function verb(n) {\n            return function(v) {\n                return step([n, v]);\n            };\n        }\n        function step(op) {\n            if (f) throw new TypeError(\"Generator is already executing.\");\n            while (_)\n                try {\n                    if (\n                        ((f = 1),\n                        y &&\n                            (t =\n                                op[0] & 2\n                                    ? y[\"return\"]\n                                    : op[0]\n                                    ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0)\n                                    : y.next) &&\n                            !(t = t.call(y, op[1])).done)\n                    )\n                        return t;\n                    if (((y = 0), t)) op = [op[0] & 2, t.value];\n                    switch (op[0]) {\n                        case 0:\n                        case 1:\n                            t = op;\n                            break;\n                        case 4:\n                            _.label++;\n                            return { value: op[1], done: false };\n                        case 5:\n                            _.label++;\n                            y = op[1];\n                            op = [0];\n                            continue;\n                        case 7:\n                            op = _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                        default:\n                            if (\n                                !((t = _.trys), (t = t.length > 0 && t[t.length - 1])) &&\n                                (op[0] === 6 || op[0] === 2)\n                            ) {\n                                _ = 0;\n                                continue;\n                            }\n                            if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {\n                                _.label = op[1];\n                                break;\n                            }\n                            if (op[0] === 6 && _.label < t[1]) {\n                                _.label = t[1];\n                                t = op;\n                                break;\n                            }\n                            if (t && _.label < t[2]) {\n                                _.label = t[2];\n                                _.ops.push(op);\n                                break;\n                            }\n                            if (t[2]) _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                    }\n                    op = body.call(thisArg, _);\n                } catch (e) {\n                    op = [6, e];\n                    y = 0;\n                } finally {\n                    f = t = 0;\n                }\n            if (op[0] & 5) throw op[1];\n            return { value: op[0] ? op[1] : void 0, done: true };\n        }\n    };\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * From axios package\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nfunction enhanceAxiosError(error, config, code, request, response) {\n    error.config = config;\n    if (code) {\n        error.code = code;\n    }\n    error.request = request;\n    error.response = response;\n    error.isAxiosError = true;\n    error.toJSON = function toJSON() {\n        return {\n            // Standard\n            message: this.message,\n            name: this.name,\n            // Microsoft\n            description: this.description,\n            number: this.number,\n            // Mozilla\n            fileName: this.fileName,\n            lineNumber: this.lineNumber,\n            columnNumber: this.columnNumber,\n            stack: this.stack,\n            // Axios\n            config: this.config,\n            code: this.code\n        };\n    };\n    return error;\n}\nfunction createAxiosErrorFromFetchResp(response) {\n    return __awaiter(this, void 0, void 0, function() {\n        var config, contentType, data, _a, axiosResponse;\n        return __generator(this, function(_b) {\n            switch (_b.label) {\n                case 0:\n                    config = {\n                        url: response.url,\n                        headers: response.headers\n                    };\n                    contentType = response.headers.get(\"content-type\");\n                    if (!(contentType === null)) return [3 /*break*/, 5];\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, response.text()];\n                case 2:\n                    data = _b.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    _a = _b.sent();\n                    data = \"\";\n                    return [3 /*break*/, 4];\n                case 4:\n                    return [3 /*break*/, 11];\n                case 5:\n                    if (!contentType.includes(\"application/json\")) return [3 /*break*/, 7];\n                    return [4 /*yield*/, response.json()];\n                case 6:\n                    data = _b.sent();\n                    return [3 /*break*/, 11];\n                case 7:\n                    if (!contentType.includes(\"text/\")) return [3 /*break*/, 9];\n                    return [4 /*yield*/, response.text()];\n                case 8:\n                    data = _b.sent();\n                    return [3 /*break*/, 11];\n                case 9:\n                    return [4 /*yield*/, response.blob()];\n                case 10:\n                    data = _b.sent();\n                    _b.label = 11;\n                case 11:\n                    axiosResponse = {\n                        data: data,\n                        status: response.status,\n                        statusText: response.statusText,\n                        headers: response.headers,\n                        config: config,\n                        request: undefined\n                    };\n                    return [\n                        2 /*return*/,\n                        enhanceAxiosError(\n                            new Error(\"Request failed with status code \" + response.status),\n                            config,\n                            undefined,\n                            undefined,\n                            axiosResponse\n                        )\n                    ];\n            }\n        });\n    });\n}\nexports.createAxiosErrorFromFetchResp = createAxiosErrorFromFetchResp;\nfunction createAxiosErrorFromAxiosResp(response) {\n    return __awaiter(this, void 0, void 0, function() {\n        return __generator(this, function(_a) {\n            return [\n                2 /*return*/,\n                enhanceAxiosError(\n                    new Error(\"Request failed with status code \" + response.status),\n                    response.config,\n                    undefined,\n                    response.request,\n                    response\n                )\n            ];\n        });\n    });\n}\nexports.createAxiosErrorFromAxiosResp = createAxiosErrorFromAxiosResp;\n","\"use strict\";\nvar __assign =\n    (this && this.__assign) ||\n    function() {\n        __assign =\n            Object.assign ||\n            function(t) {\n                for (var s, i = 1, n = arguments.length; i < n; i++) {\n                    s = arguments[i];\n                    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n                }\n                return t;\n            };\n        return __assign.apply(this, arguments);\n    };\nvar __awaiter =\n    (this && this.__awaiter) ||\n    function(thisArg, _arguments, P, generator) {\n        function adopt(value) {\n            return value instanceof P\n                ? value\n                : new P(function(resolve) {\n                      resolve(value);\n                  });\n        }\n        return new (P || (P = Promise))(function(resolve, reject) {\n            function fulfilled(value) {\n                try {\n                    step(generator.next(value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function rejected(value) {\n                try {\n                    step(generator[\"throw\"](value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function step(result) {\n                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n            }\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\n        });\n    };\nvar __generator =\n    (this && this.__generator) ||\n    function(thisArg, body) {\n        var _ = {\n                label: 0,\n                sent: function() {\n                    if (t[0] & 1) throw t[1];\n                    return t[1];\n                },\n                trys: [],\n                ops: []\n            },\n            f,\n            y,\n            t,\n            g;\n        return (\n            (g = { next: verb(0), throw: verb(1), return: verb(2) }),\n            typeof Symbol === \"function\" &&\n                (g[Symbol.iterator] = function() {\n                    return this;\n                }),\n            g\n        );\n        function verb(n) {\n            return function(v) {\n                return step([n, v]);\n            };\n        }\n        function step(op) {\n            if (f) throw new TypeError(\"Generator is already executing.\");\n            while (_)\n                try {\n                    if (\n                        ((f = 1),\n                        y &&\n                            (t =\n                                op[0] & 2\n                                    ? y[\"return\"]\n                                    : op[0]\n                                    ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0)\n                                    : y.next) &&\n                            !(t = t.call(y, op[1])).done)\n                    )\n                        return t;\n                    if (((y = 0), t)) op = [op[0] & 2, t.value];\n                    switch (op[0]) {\n                        case 0:\n                        case 1:\n                            t = op;\n                            break;\n                        case 4:\n                            _.label++;\n                            return { value: op[1], done: false };\n                        case 5:\n                            _.label++;\n                            y = op[1];\n                            op = [0];\n                            continue;\n                        case 7:\n                            op = _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                        default:\n                            if (\n                                !((t = _.trys), (t = t.length > 0 && t[t.length - 1])) &&\n                                (op[0] === 6 || op[0] === 2)\n                            ) {\n                                _ = 0;\n                                continue;\n                            }\n                            if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {\n                                _.label = op[1];\n                                break;\n                            }\n                            if (op[0] === 6 && _.label < t[1]) {\n                                _.label = t[1];\n                                t = op;\n                                break;\n                            }\n                            if (t && _.label < t[2]) {\n                                _.label = t[2];\n                                _.ops.push(op);\n                                break;\n                            }\n                            if (t[2]) _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                    }\n                    op = body.call(thisArg, _);\n                } catch (e) {\n                    op = [6, e];\n                    y = 0;\n                } finally {\n                    f = t = 0;\n                }\n            if (op[0] & 5) throw op[1];\n            return { value: op[0] ? op[1] : void 0, done: true };\n        }\n    };\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar processState_1 = require(\"./processState\");\nvar version_1 = require(\"./version\");\nvar browser_tabs_lock_1 = require(\"browser-tabs-lock\");\nvar utils_1 = require(\"./utils\");\nvar AntiCsrfToken = /** @class */ (function() {\n    function AntiCsrfToken() {}\n    AntiCsrfToken.getToken = function(associatedIdRefreshToken) {\n        return __awaiter(this, void 0, void 0, function() {\n            var antiCsrf;\n            return __generator(this, function(_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (associatedIdRefreshToken === undefined) {\n                            AntiCsrfToken.tokenInfo = undefined;\n                            return [2 /*return*/, undefined];\n                        }\n                        if (!(AntiCsrfToken.tokenInfo === undefined)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, getAntiCSRFToken()];\n                    case 1:\n                        antiCsrf = _a.sent();\n                        if (antiCsrf === null) {\n                            return [2 /*return*/, undefined];\n                        }\n                        AntiCsrfToken.tokenInfo = {\n                            antiCsrf: antiCsrf,\n                            associatedIdRefreshToken: associatedIdRefreshToken\n                        };\n                        return [3 /*break*/, 4];\n                    case 2:\n                        if (!(AntiCsrfToken.tokenInfo.associatedIdRefreshToken !== associatedIdRefreshToken))\n                            return [3 /*break*/, 4];\n                        // csrf token has changed.\n                        AntiCsrfToken.tokenInfo = undefined;\n                        return [4 /*yield*/, AntiCsrfToken.getToken(associatedIdRefreshToken)];\n                    case 3:\n                        return [2 /*return*/, _a.sent()];\n                    case 4:\n                        return [2 /*return*/, AntiCsrfToken.tokenInfo.antiCsrf];\n                }\n            });\n        });\n    };\n    AntiCsrfToken.removeToken = function() {\n        return __awaiter(this, void 0, void 0, function() {\n            return __generator(this, function(_a) {\n                switch (_a.label) {\n                    case 0:\n                        AntiCsrfToken.tokenInfo = undefined;\n                        return [4 /*yield*/, setAntiCSRF(undefined)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AntiCsrfToken.setItem = function(associatedIdRefreshToken, antiCsrf) {\n        return __awaiter(this, void 0, void 0, function() {\n            return __generator(this, function(_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (associatedIdRefreshToken === undefined) {\n                            AntiCsrfToken.tokenInfo = undefined;\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, setAntiCSRF(antiCsrf)];\n                    case 1:\n                        _a.sent();\n                        AntiCsrfToken.tokenInfo = {\n                            antiCsrf: antiCsrf,\n                            associatedIdRefreshToken: associatedIdRefreshToken\n                        };\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return AntiCsrfToken;\n})();\nexports.AntiCsrfToken = AntiCsrfToken;\n// Note: We do not store this in memory because another tab may have\n// modified this value, and if so, we may not know about it in this tab\nvar FrontToken = /** @class */ (function() {\n    function FrontToken() {}\n    FrontToken.getTokenInfo = function() {\n        return __awaiter(this, void 0, void 0, function() {\n            var frontToken;\n            return __generator(this, function(_a) {\n                switch (_a.label) {\n                    case 0:\n                        return [4 /*yield*/, getFrontToken()];\n                    case 1:\n                        frontToken = _a.sent();\n                        if (!(frontToken === null)) return [3 /*break*/, 5];\n                        return [4 /*yield*/, getIdRefreshToken(false)];\n                    case 2:\n                        if (!(_a.sent().status === \"EXISTS\")) return [3 /*break*/, 4];\n                        // this means that the id refresh token has been set, so we must\n                        // wait for this to be set or removed\n                        return [\n                            4 /*yield*/,\n                            new Promise(function(resolve) {\n                                FrontToken.waiters.push(resolve);\n                            })\n                        ];\n                    case 3:\n                        // this means that the id refresh token has been set, so we must\n                        // wait for this to be set or removed\n                        _a.sent();\n                        return [2 /*return*/, FrontToken.getTokenInfo()];\n                    case 4:\n                        return [2 /*return*/, undefined];\n                    case 5:\n                        return [2 /*return*/, JSON.parse(decodeURIComponent(escape(atob(frontToken))))];\n                }\n            });\n        });\n    };\n    FrontToken.removeToken = function() {\n        return __awaiter(this, void 0, void 0, function() {\n            return __generator(this, function(_a) {\n                switch (_a.label) {\n                    case 0:\n                        return [4 /*yield*/, setFrontToken(undefined)];\n                    case 1:\n                        _a.sent();\n                        FrontToken.waiters.forEach(function(f) {\n                            return f(undefined);\n                        });\n                        FrontToken.waiters = [];\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    FrontToken.setItem = function(frontToken) {\n        return __awaiter(this, void 0, void 0, function() {\n            return __generator(this, function(_a) {\n                switch (_a.label) {\n                    case 0:\n                        return [4 /*yield*/, setFrontToken(frontToken)];\n                    case 1:\n                        _a.sent();\n                        FrontToken.waiters.forEach(function(f) {\n                            return f(undefined);\n                        });\n                        FrontToken.waiters = [];\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    // these are waiters for when the idRefreshToken has been set, but this token has\n    // not yet been set. Once this token is set or removed, the waiters are resolved.\n    FrontToken.waiters = [];\n    return FrontToken;\n})();\nexports.FrontToken = FrontToken;\n/**\n * @class AuthHttpRequest\n * @description wrapper for common http methods.\n */\nvar AuthHttpRequest = /** @class */ (function() {\n    function AuthHttpRequest() {}\n    AuthHttpRequest.init = function(config, recipeImpl) {\n        AuthHttpRequest.env = utils_1.getWindowOrThrow().fetch === undefined ? global : utils_1.getWindowOrThrow();\n        AuthHttpRequest.refreshTokenUrl = config.apiDomain + config.apiBasePath + \"/session/refresh\";\n        AuthHttpRequest.signOutUrl = config.apiDomain + config.apiBasePath + \"/signout\";\n        AuthHttpRequest.rid = \"session\";\n        AuthHttpRequest.config = config;\n        if (AuthHttpRequest.env.__supertokensOriginalFetch === undefined) {\n            // this block contains code that is run just once per page load..\n            // all items in this block are attached to the global env so that\n            // even if the init function is called more than once (maybe across JS scripts),\n            // things will not get created multiple times.\n            AuthHttpRequest.env.__supertokensOriginalFetch = AuthHttpRequest.env.fetch.bind(AuthHttpRequest.env);\n            AuthHttpRequest.env.__supertokensSessionRecipe = recipeImpl;\n            AuthHttpRequest.env.fetch = AuthHttpRequest.env.__supertokensSessionRecipe.addFetchInterceptorsAndReturnModifiedFetch(\n                AuthHttpRequest.env.__supertokensOriginalFetch,\n                config\n            );\n        }\n        AuthHttpRequest.recipeImpl = AuthHttpRequest.env.__supertokensSessionRecipe;\n        AuthHttpRequest.initCalled = true;\n    };\n    AuthHttpRequest.initCalled = false;\n    AuthHttpRequest.doRequest = function(httpCall, config, url) {\n        return __awaiter(void 0, void 0, void 0, function() {\n            var doNotDoInterception,\n                returnObj,\n                preRequestIdToken,\n                clonedHeaders,\n                configWithAntiCsrf,\n                antiCsrfToken,\n                response,\n                idRefreshToken,\n                retry,\n                antiCsrfToken,\n                tok,\n                frontToken,\n                postRequestIdToken;\n            return __generator(this, function(_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!AuthHttpRequest.initCalled) {\n                            throw Error(\"init function not called\");\n                        }\n                        doNotDoInterception = false;\n                        try {\n                            doNotDoInterception =\n                                (typeof url === \"string\" &&\n                                    !utils_1.shouldDoInterceptionBasedOnUrl(\n                                        url,\n                                        AuthHttpRequest.config.apiDomain,\n                                        AuthHttpRequest.config.cookieDomain\n                                    )) ||\n                                (url !== undefined &&\n                                typeof url.url === \"string\" && // this is because url can be an object like {method: ..., url: ...}\n                                    !utils_1.shouldDoInterceptionBasedOnUrl(\n                                        url.url,\n                                        AuthHttpRequest.config.apiDomain,\n                                        AuthHttpRequest.config.cookieDomain\n                                    ));\n                        } catch (err) {\n                            if (err.message === \"Please provide a valid domain name\") {\n                                // .origin gives the port as well..\n                                doNotDoInterception = !utils_1.shouldDoInterceptionBasedOnUrl(\n                                    window.location.origin,\n                                    AuthHttpRequest.config.apiDomain,\n                                    AuthHttpRequest.config.cookieDomain\n                                );\n                            } else {\n                                throw err;\n                            }\n                        }\n                        if (!doNotDoInterception) return [3 /*break*/, 2];\n                        return [4 /*yield*/, httpCall(config)];\n                    case 1:\n                        return [2 /*return*/, _a.sent()];\n                    case 2:\n                        processState_1.ProcessState.getInstance().addState(\n                            processState_1.PROCESS_STATE.CALLING_INTERCEPTION_REQUEST\n                        );\n                        _a.label = 3;\n                    case 3:\n                        _a.trys.push([3, , 20, 25]);\n                        returnObj = undefined;\n                        _a.label = 4;\n                    case 4:\n                        if (!true) return [3 /*break*/, 19];\n                        return [4 /*yield*/, getIdRefreshToken(true)];\n                    case 5:\n                        preRequestIdToken = _a.sent();\n                        clonedHeaders = new Headers(\n                            config !== undefined && config.headers !== undefined ? config.headers : url.headers\n                        );\n                        configWithAntiCsrf = __assign(__assign({}, config), { headers: clonedHeaders });\n                        if (!(preRequestIdToken.status === \"EXISTS\")) return [3 /*break*/, 7];\n                        return [4 /*yield*/, AntiCsrfToken.getToken(preRequestIdToken.token)];\n                    case 6:\n                        antiCsrfToken = _a.sent();\n                        if (antiCsrfToken !== undefined) {\n                            clonedHeaders.set(\"anti-csrf\", antiCsrfToken);\n                        }\n                        _a.label = 7;\n                    case 7:\n                        if (AuthHttpRequest.config.autoAddCredentials) {\n                            if (configWithAntiCsrf === undefined) {\n                                configWithAntiCsrf = {\n                                    credentials: \"include\"\n                                };\n                            } else if (configWithAntiCsrf.credentials === undefined) {\n                                configWithAntiCsrf = __assign(__assign({}, configWithAntiCsrf), {\n                                    credentials: \"include\"\n                                });\n                            }\n                        }\n                        // adding rid for anti-csrf protection: Anti-csrf via custom header\n                        if (!clonedHeaders.has(\"rid\")) {\n                            clonedHeaders.set(\"rid\", \"anti-csrf\");\n                        }\n                        return [4 /*yield*/, httpCall(configWithAntiCsrf)];\n                    case 8:\n                        response = _a.sent();\n                        idRefreshToken = response.headers.get(\"id-refresh-token\");\n                        if (!idRefreshToken) return [3 /*break*/, 10];\n                        return [4 /*yield*/, setIdRefreshToken(idRefreshToken, response.status)];\n                    case 9:\n                        _a.sent();\n                        _a.label = 10;\n                    case 10:\n                        if (!(response.status === AuthHttpRequest.config.sessionExpiredStatusCode))\n                            return [3 /*break*/, 12];\n                        return [4 /*yield*/, onUnauthorisedResponse(preRequestIdToken)];\n                    case 11:\n                        retry = _a.sent();\n                        if (retry.result !== \"RETRY\") {\n                            returnObj = retry.error !== undefined ? retry.error : response;\n                            return [3 /*break*/, 19];\n                        }\n                        return [3 /*break*/, 18];\n                    case 12:\n                        antiCsrfToken = response.headers.get(\"anti-csrf\");\n                        if (!antiCsrfToken) return [3 /*break*/, 15];\n                        return [4 /*yield*/, getIdRefreshToken(true)];\n                    case 13:\n                        tok = _a.sent();\n                        if (!(tok.status === \"EXISTS\")) return [3 /*break*/, 15];\n                        return [4 /*yield*/, AntiCsrfToken.setItem(tok.token, antiCsrfToken)];\n                    case 14:\n                        _a.sent();\n                        _a.label = 15;\n                    case 15:\n                        frontToken = response.headers.get(\"front-token\");\n                        if (!frontToken) return [3 /*break*/, 17];\n                        return [4 /*yield*/, FrontToken.setItem(frontToken)];\n                    case 16:\n                        _a.sent();\n                        _a.label = 17;\n                    case 17:\n                        return [2 /*return*/, response];\n                    case 18:\n                        return [3 /*break*/, 4];\n                    case 19:\n                        // if it comes here, means we breaked. which happens only if we have logged out.\n                        return [2 /*return*/, returnObj];\n                    case 20:\n                        return [4 /*yield*/, getIdRefreshToken(false)];\n                    case 21:\n                        postRequestIdToken = _a.sent();\n                        if (!(postRequestIdToken.status === \"NOT_EXISTS\")) return [3 /*break*/, 24];\n                        return [4 /*yield*/, AntiCsrfToken.removeToken()];\n                    case 22:\n                        _a.sent();\n                        return [4 /*yield*/, FrontToken.removeToken()];\n                    case 23:\n                        _a.sent();\n                        _a.label = 24;\n                    case 24:\n                        return [7 /*endfinally*/];\n                    case 25:\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AuthHttpRequest.attemptRefreshingSession = function() {\n        return __awaiter(void 0, void 0, void 0, function() {\n            var preRequestIdToken, refresh;\n            return __generator(this, function(_a) {\n                switch (_a.label) {\n                    case 0:\n                        return [4 /*yield*/, getIdRefreshToken(false)];\n                    case 1:\n                        preRequestIdToken = _a.sent();\n                        return [4 /*yield*/, onUnauthorisedResponse(preRequestIdToken)];\n                    case 2:\n                        refresh = _a.sent();\n                        if (refresh.result === \"API_ERROR\") {\n                            throw refresh.error;\n                        }\n                        return [2 /*return*/, refresh.result === \"RETRY\"];\n                }\n            });\n        });\n    };\n    return AuthHttpRequest;\n})();\nexports.default = AuthHttpRequest;\nvar ID_REFRESH_TOKEN_NAME = \"sIRTFrontend\";\nvar ANTI_CSRF_NAME = \"sAntiCsrf\";\nvar FRONT_TOKEN_NAME = \"sFrontToken\";\n/**\n * @description attempts to call the refresh token API each time we are sure the session has expired, or it throws an error or,\n * or the ID_COOKIE_NAME has changed value -> which may mean that we have a new set of tokens.\n */\nfunction onUnauthorisedResponse(preRequestIdToken) {\n    return __awaiter(this, void 0, void 0, function() {\n        var lock,\n            postLockID,\n            headers,\n            antiCsrfToken_1,\n            preAPIResult,\n            response,\n            removeIdRefreshToken,\n            idRefreshToken,\n            antiCsrfToken,\n            tok,\n            frontToken,\n            error_1,\n            idCookieValue;\n        return __generator(this, function(_a) {\n            switch (_a.label) {\n                case 0:\n                    lock = new browser_tabs_lock_1.default();\n                    _a.label = 1;\n                case 1:\n                    if (!true) return [3 /*break*/, 29];\n                    return [4 /*yield*/, lock.acquireLock(\"REFRESH_TOKEN_USE\", 1000)];\n                case 2:\n                    if (!_a.sent()) return [3 /*break*/, 27];\n                    _a.label = 3;\n                case 3:\n                    _a.trys.push([3, 19, 21, 27]);\n                    return [4 /*yield*/, getIdRefreshToken(false)];\n                case 4:\n                    postLockID = _a.sent();\n                    if (postLockID.status === \"NOT_EXISTS\") {\n                        // if it comes here, it means a request was made thinking\n                        // that the session exists, but it doesn't actually exist.\n                        AuthHttpRequest.config.onHandleEvent({\n                            action: \"UNAUTHORISED\",\n                            sessionExpiredOrRevoked: false\n                        });\n                        return [2 /*return*/, { result: \"SESSION_EXPIRED\" }];\n                    }\n                    if (\n                        postLockID.status !== preRequestIdToken.status ||\n                        (postLockID.status === \"EXISTS\" &&\n                            preRequestIdToken.status === \"EXISTS\" &&\n                            postLockID.token !== preRequestIdToken.token)\n                    ) {\n                        // means that some other process has already called this API and succeeded. so we need to call it again\n                        return [2 /*return*/, { result: \"RETRY\" }];\n                    }\n                    headers = {};\n                    if (!(preRequestIdToken.status === \"EXISTS\")) return [3 /*break*/, 6];\n                    return [4 /*yield*/, AntiCsrfToken.getToken(preRequestIdToken.token)];\n                case 5:\n                    antiCsrfToken_1 = _a.sent();\n                    if (antiCsrfToken_1 !== undefined) {\n                        headers = __assign(__assign({}, headers), { \"anti-csrf\": antiCsrfToken_1 });\n                    }\n                    _a.label = 6;\n                case 6:\n                    headers = __assign(__assign({ rid: AuthHttpRequest.rid }, headers), {\n                        \"fdi-version\": version_1.supported_fdi.join(\",\")\n                    });\n                    return [\n                        4 /*yield*/,\n                        AuthHttpRequest.config.preAPIHook({\n                            action: \"REFRESH_SESSION\",\n                            requestInit: {\n                                method: \"post\",\n                                credentials: \"include\",\n                                headers: headers\n                            },\n                            url: AuthHttpRequest.refreshTokenUrl\n                        })\n                    ];\n                case 7:\n                    preAPIResult = _a.sent();\n                    return [\n                        4 /*yield*/,\n                        AuthHttpRequest.env.__supertokensOriginalFetch(preAPIResult.url, preAPIResult.requestInit)\n                    ];\n                case 8:\n                    response = _a.sent();\n                    removeIdRefreshToken = true;\n                    idRefreshToken = response.headers.get(\"id-refresh-token\");\n                    if (!idRefreshToken) return [3 /*break*/, 10];\n                    return [4 /*yield*/, setIdRefreshToken(idRefreshToken, response.status)];\n                case 9:\n                    _a.sent();\n                    removeIdRefreshToken = false;\n                    _a.label = 10;\n                case 10:\n                    if (!(response.status === AuthHttpRequest.config.sessionExpiredStatusCode))\n                        return [3 /*break*/, 12];\n                    if (!removeIdRefreshToken) return [3 /*break*/, 12];\n                    return [4 /*yield*/, setIdRefreshToken(\"remove\", response.status)];\n                case 11:\n                    _a.sent();\n                    _a.label = 12;\n                case 12:\n                    if (response.status >= 300) {\n                        throw response;\n                    }\n                    return [4 /*yield*/, getIdRefreshToken(false)];\n                case 13:\n                    if (_a.sent().status === \"NOT_EXISTS\") {\n                        // The execution should never come here.. but just in case.\n                        // removed by server. So we logout\n                        // we do not send \"UNAUTHORISED\" event here because\n                        // this is a result of the refresh API returning a session expiry, which\n                        // means that the frontend did not know for sure that the session existed\n                        // in the first place.\n                        return [2 /*return*/, { result: \"SESSION_EXPIRED\" }];\n                    }\n                    antiCsrfToken = response.headers.get(\"anti-csrf\");\n                    if (!antiCsrfToken) return [3 /*break*/, 16];\n                    return [4 /*yield*/, getIdRefreshToken(true)];\n                case 14:\n                    tok = _a.sent();\n                    if (!(tok.status === \"EXISTS\")) return [3 /*break*/, 16];\n                    return [4 /*yield*/, AntiCsrfToken.setItem(tok.token, antiCsrfToken)];\n                case 15:\n                    _a.sent();\n                    _a.label = 16;\n                case 16:\n                    frontToken = response.headers.get(\"front-token\");\n                    if (!frontToken) return [3 /*break*/, 18];\n                    return [4 /*yield*/, FrontToken.setItem(frontToken)];\n                case 17:\n                    _a.sent();\n                    _a.label = 18;\n                case 18:\n                    AuthHttpRequest.config.onHandleEvent({\n                        action: \"REFRESH_SESSION\"\n                    });\n                    return [2 /*return*/, { result: \"RETRY\" }];\n                case 19:\n                    error_1 = _a.sent();\n                    return [4 /*yield*/, getIdRefreshToken(false)];\n                case 20:\n                    if (_a.sent().status === \"NOT_EXISTS\") {\n                        // removed by server.\n                        // we do not send \"UNAUTHORISED\" event here because\n                        // this is a result of the refresh API returning a session expiry, which\n                        // means that the frontend did not know for sure that the session existed\n                        // in the first place.\n                        return [2 /*return*/, { result: \"SESSION_EXPIRED\", error: error_1 }];\n                    }\n                    return [2 /*return*/, { result: \"API_ERROR\", error: error_1 }];\n                case 21:\n                    return [4 /*yield*/, lock.releaseLock(\"REFRESH_TOKEN_USE\")];\n                case 22:\n                    _a.sent();\n                    return [4 /*yield*/, getIdRefreshToken(false)];\n                case 23:\n                    if (!(_a.sent().status === \"NOT_EXISTS\")) return [3 /*break*/, 26];\n                    return [4 /*yield*/, AntiCsrfToken.removeToken()];\n                case 24:\n                    _a.sent();\n                    return [4 /*yield*/, FrontToken.removeToken()];\n                case 25:\n                    _a.sent();\n                    _a.label = 26;\n                case 26:\n                    return [7 /*endfinally*/];\n                case 27:\n                    return [4 /*yield*/, getIdRefreshToken(false)];\n                case 28:\n                    idCookieValue = _a.sent();\n                    if (idCookieValue.status === \"NOT_EXISTS\") {\n                        // removed by server. So we logout\n                        return [2 /*return*/, { result: \"SESSION_EXPIRED\" }];\n                    } else {\n                        if (\n                            idCookieValue.status !== preRequestIdToken.status ||\n                            (idCookieValue.status === \"EXISTS\" &&\n                                preRequestIdToken.status === \"EXISTS\" &&\n                                idCookieValue.token !== preRequestIdToken.token)\n                        ) {\n                            return [2 /*return*/, { result: \"RETRY\" }];\n                        }\n                        // here we try to call the API again since we probably failed to acquire lock and nothing has changed.\n                    }\n                    return [3 /*break*/, 1];\n                case 29:\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nexports.onUnauthorisedResponse = onUnauthorisedResponse;\n// if tryRefresh is true & this token doesn't exist, we try and refresh the session\n// else we return undefined.\nfunction getIdRefreshToken(tryRefresh) {\n    return __awaiter(this, void 0, void 0, function() {\n        function getIdRefreshTokenFromLocal() {\n            return __awaiter(this, void 0, void 0, function() {\n                function getIDFromCookieOld() {\n                    var value = \"; \" + utils_1.getWindowOrThrow().document.cookie;\n                    var parts = value.split(\"; \" + ID_REFRESH_TOKEN_NAME + \"=\");\n                    if (parts.length >= 2) {\n                        var last = parts.pop();\n                        if (last === \"remove\") {\n                            // it means no session exists. This is different from\n                            // it being undefined since in that case a session may or may not exist.\n                            return \"remove\";\n                        }\n                        if (last !== undefined) {\n                            return last.split(\";\").shift();\n                        }\n                    }\n                    return undefined;\n                }\n                var fromCookie;\n                return __generator(this, function(_a) {\n                    fromCookie = getIDFromCookieOld();\n                    return [2 /*return*/, fromCookie];\n                });\n            });\n        }\n        var token, response, res;\n        return __generator(this, function(_a) {\n            switch (_a.label) {\n                case 0:\n                    return [4 /*yield*/, getIdRefreshTokenFromLocal()];\n                case 1:\n                    token = _a.sent();\n                    if (token === \"remove\") {\n                        return [\n                            2 /*return*/,\n                            {\n                                status: \"NOT_EXISTS\"\n                            }\n                        ];\n                    }\n                    if (!(token === undefined)) return [3 /*break*/, 5];\n                    response = {\n                        status: \"MAY_EXIST\"\n                    };\n                    if (!tryRefresh) return [3 /*break*/, 4];\n                    return [4 /*yield*/, onUnauthorisedResponse(response)];\n                case 2:\n                    res = _a.sent();\n                    if (res.result !== \"RETRY\") {\n                        // in case the backend is not working, we treat it as the session not existing...\n                        return [\n                            2 /*return*/,\n                            {\n                                status: \"NOT_EXISTS\"\n                            }\n                        ];\n                    }\n                    return [4 /*yield*/, getIdRefreshToken(tryRefresh)];\n                case 3:\n                    return [2 /*return*/, _a.sent()];\n                case 4:\n                    return [2 /*return*/, response];\n                case 5:\n                    return [\n                        2 /*return*/,\n                        {\n                            status: \"EXISTS\",\n                            token: token\n                        }\n                    ];\n            }\n        });\n    });\n}\nexports.getIdRefreshToken = getIdRefreshToken;\nfunction setIdRefreshToken(idRefreshToken, statusCode) {\n    return __awaiter(this, void 0, void 0, function() {\n        function setIDToCookie(idRefreshToken, domain) {\n            // if the value of the token is \"remove\", it means\n            // the session is being removed. So we set it to \"remove\" in the\n            // cookie. This way, when we query for this token, we will return\n            // undefined (see getIdRefreshToken), and not refresh the session\n            // unnecessarily.\n            var expires = \"Fri, 31 Dec 9999 23:59:59 GMT\";\n            var cookieVal = \"remove\";\n            if (idRefreshToken !== \"remove\") {\n                var splitted = idRefreshToken.split(\";\");\n                cookieVal = splitted[0];\n                // we must always respect this expiry and not set it to infinite\n                // cause this ties into the session's lifetime. If we set this\n                // to infinite, then a session may not exist, and this will exist,\n                // then for example, if we check a session exists, and this says yes,\n                // then if we getAccessTokenPayload, that will attempt a session refresh which will fail.\n                // Another reason to respect this is that if we don't, then signOut will\n                // call the API which will return 200 (no 401 cause the API thinks no session exists),\n                // in which case, we will not end up firing the SIGN_OUT on handle event.\n                expires = new Date(Number(splitted[1])).toUTCString();\n            }\n            if (domain === \"localhost\" || domain === window.location.hostname) {\n                // since some browsers ignore cookies with domain set to localhost\n                // see https://github.com/supertokens/supertokens-website/issues/25\n                utils_1.getWindowOrThrow().document.cookie =\n                    ID_REFRESH_TOKEN_NAME +\n                    \"=\" +\n                    cookieVal +\n                    \";expires=\" +\n                    expires +\n                    \";path=/;samesite=\" +\n                    (AuthHttpRequest.config.isInIframe ? \"none;secure\" : \"lax\");\n            } else {\n                utils_1.getWindowOrThrow().document.cookie =\n                    ID_REFRESH_TOKEN_NAME +\n                    \"=\" +\n                    cookieVal +\n                    \";expires=\" +\n                    expires +\n                    \";domain=\" +\n                    domain +\n                    \";path=/;samesite=\" +\n                    (AuthHttpRequest.config.isInIframe ? \"none;secure\" : \"lax\");\n            }\n        }\n        var status;\n        return __generator(this, function(_a) {\n            switch (_a.label) {\n                case 0:\n                    return [4 /*yield*/, getIdRefreshToken(false)];\n                case 1:\n                    status = _a.sent().status;\n                    setIDToCookie(idRefreshToken, AuthHttpRequest.config.sessionScope);\n                    if (idRefreshToken === \"remove\" && status === \"EXISTS\") {\n                        // we check for wasLoggedIn cause we don't want to fire an event\n                        // unnecessarily on first app load or if the user tried\n                        // to query an API that returned 401 while the user was not logged in...\n                        if (statusCode === AuthHttpRequest.config.sessionExpiredStatusCode) {\n                            AuthHttpRequest.config.onHandleEvent({\n                                action: \"UNAUTHORISED\",\n                                sessionExpiredOrRevoked: true\n                            });\n                        } else {\n                            AuthHttpRequest.config.onHandleEvent({\n                                action: \"SIGN_OUT\"\n                            });\n                        }\n                    }\n                    if (idRefreshToken !== \"remove\" && status === \"NOT_EXISTS\") {\n                        AuthHttpRequest.config.onHandleEvent({\n                            action: \"SESSION_CREATED\"\n                        });\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nexports.setIdRefreshToken = setIdRefreshToken;\nfunction getAntiCSRFToken() {\n    return __awaiter(this, void 0, void 0, function() {\n        function getAntiCSRFromCookie() {\n            var value = \"; \" + utils_1.getWindowOrThrow().document.cookie;\n            var parts = value.split(\"; \" + ANTI_CSRF_NAME + \"=\");\n            if (parts.length >= 2) {\n                var last = parts.pop();\n                if (last !== undefined) {\n                    var temp = last.split(\";\").shift();\n                    if (temp === undefined) {\n                        return null;\n                    }\n                    return temp;\n                }\n            }\n            return null;\n        }\n        var fromCookie;\n        return __generator(this, function(_a) {\n            switch (_a.label) {\n                case 0:\n                    return [4 /*yield*/, getIdRefreshToken(true)];\n                case 1:\n                    // we do not call doesSessionExist here cause the user might override that\n                    // function here and then it may break the logic of our original implementation.\n                    if (!(_a.sent().status === \"EXISTS\")) {\n                        return [2 /*return*/, null];\n                    }\n                    fromCookie = getAntiCSRFromCookie();\n                    return [2 /*return*/, fromCookie];\n            }\n        });\n    });\n}\n// give antiCSRFToken as undefined to remove it.\nfunction setAntiCSRF(antiCSRFToken) {\n    return __awaiter(this, void 0, void 0, function() {\n        function setAntiCSRFToCookie(antiCSRFToken, domain) {\n            var expires = \"Thu, 01 Jan 1970 00:00:01 GMT\";\n            var cookieVal = \"\";\n            if (antiCSRFToken !== undefined) {\n                cookieVal = antiCSRFToken;\n                expires = undefined; // set cookie without expiry\n            }\n            if (domain === \"localhost\" || domain === window.location.hostname) {\n                // since some browsers ignore cookies with domain set to localhost\n                // see https://github.com/supertokens/supertokens-website/issues/25\n                if (expires !== undefined) {\n                    utils_1.getWindowOrThrow().document.cookie =\n                        ANTI_CSRF_NAME +\n                        \"=\" +\n                        cookieVal +\n                        \";expires=\" +\n                        expires +\n                        \";path=/;samesite=\" +\n                        (AuthHttpRequest.config.isInIframe ? \"none;secure\" : \"lax\");\n                } else {\n                    utils_1.getWindowOrThrow().document.cookie =\n                        ANTI_CSRF_NAME +\n                        \"=\" +\n                        cookieVal +\n                        \";expires=Fri, 31 Dec 9999 23:59:59 GMT;path=/;samesite=\" +\n                        (AuthHttpRequest.config.isInIframe ? \"none;secure\" : \"lax\");\n                }\n            } else {\n                if (expires !== undefined) {\n                    utils_1.getWindowOrThrow().document.cookie =\n                        ANTI_CSRF_NAME +\n                        \"=\" +\n                        cookieVal +\n                        \";expires=\" +\n                        expires +\n                        \";domain=\" +\n                        domain +\n                        \";path=/;samesite=\" +\n                        (AuthHttpRequest.config.isInIframe ? \"none;secure\" : \"lax\");\n                } else {\n                    utils_1.getWindowOrThrow().document.cookie =\n                        ANTI_CSRF_NAME +\n                        \"=\" +\n                        cookieVal +\n                        \";domain=\" +\n                        domain +\n                        \";expires=Fri, 31 Dec 9999 23:59:59 GMT;path=/;samesite=\" +\n                        (AuthHttpRequest.config.isInIframe ? \"none;secure\" : \"lax\");\n                }\n            }\n        }\n        return __generator(this, function(_a) {\n            setAntiCSRFToCookie(antiCSRFToken, AuthHttpRequest.config.sessionScope);\n            return [2 /*return*/];\n        });\n    });\n}\nexports.setAntiCSRF = setAntiCSRF;\nfunction getFrontToken() {\n    return __awaiter(this, void 0, void 0, function() {\n        function getFrontTokenFromCookie() {\n            var value = \"; \" + utils_1.getWindowOrThrow().document.cookie;\n            var parts = value.split(\"; \" + FRONT_TOKEN_NAME + \"=\");\n            if (parts.length >= 2) {\n                var last = parts.pop();\n                if (last !== undefined) {\n                    var temp = last.split(\";\").shift();\n                    if (temp === undefined) {\n                        return null;\n                    }\n                    return temp;\n                }\n            }\n            return null;\n        }\n        var fromCookie;\n        return __generator(this, function(_a) {\n            switch (_a.label) {\n                case 0:\n                    return [4 /*yield*/, getIdRefreshToken(true)];\n                case 1:\n                    // we do not call doesSessionExist here cause the user might override that\n                    // function here and then it may break the logic of our original implementation.\n                    if (!(_a.sent().status === \"EXISTS\")) {\n                        return [2 /*return*/, null];\n                    }\n                    fromCookie = getFrontTokenFromCookie();\n                    return [2 /*return*/, fromCookie];\n            }\n        });\n    });\n}\nexports.getFrontToken = getFrontToken;\nfunction setFrontToken(frontToken) {\n    return __awaiter(this, void 0, void 0, function() {\n        function setFrontTokenToCookie(frontToken, domain) {\n            var expires = \"Thu, 01 Jan 1970 00:00:01 GMT\";\n            var cookieVal = \"\";\n            if (frontToken !== undefined) {\n                cookieVal = frontToken;\n                expires = undefined; // set cookie without expiry\n            }\n            if (domain === \"localhost\" || domain === window.location.hostname) {\n                // since some browsers ignore cookies with domain set to localhost\n                // see https://github.com/supertokens/supertokens-website/issues/25\n                if (expires !== undefined) {\n                    utils_1.getWindowOrThrow().document.cookie =\n                        FRONT_TOKEN_NAME +\n                        \"=\" +\n                        cookieVal +\n                        \";expires=\" +\n                        expires +\n                        \";path=/;samesite=\" +\n                        (AuthHttpRequest.config.isInIframe ? \"none;secure\" : \"lax\");\n                } else {\n                    utils_1.getWindowOrThrow().document.cookie =\n                        FRONT_TOKEN_NAME +\n                        \"=\" +\n                        cookieVal +\n                        \";expires=Fri, 31 Dec 9999 23:59:59 GMT;path=/;samesite=\" +\n                        (AuthHttpRequest.config.isInIframe ? \"none;secure\" : \"lax\");\n                }\n            } else {\n                if (expires !== undefined) {\n                    utils_1.getWindowOrThrow().document.cookie =\n                        FRONT_TOKEN_NAME +\n                        \"=\" +\n                        cookieVal +\n                        \";expires=\" +\n                        expires +\n                        \";domain=\" +\n                        domain +\n                        \";path=/;samesite=\" +\n                        (AuthHttpRequest.config.isInIframe ? \"none;secure\" : \"lax\");\n                } else {\n                    utils_1.getWindowOrThrow().document.cookie =\n                        FRONT_TOKEN_NAME +\n                        \"=\" +\n                        cookieVal +\n                        \";domain=\" +\n                        domain +\n                        \";expires=Fri, 31 Dec 9999 23:59:59 GMT;path=/;samesite=\" +\n                        (AuthHttpRequest.config.isInIframe ? \"none;secure\" : \"lax\");\n                }\n            }\n        }\n        return __generator(this, function(_a) {\n            setFrontTokenToCookie(frontToken, AuthHttpRequest.config.sessionScope);\n            return [2 /*return*/];\n        });\n    });\n}\nexports.setFrontToken = setFrontToken;\n","\"use strict\";\n/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar __awaiter =\n    (this && this.__awaiter) ||\n    function(thisArg, _arguments, P, generator) {\n        function adopt(value) {\n            return value instanceof P\n                ? value\n                : new P(function(resolve) {\n                      resolve(value);\n                  });\n        }\n        return new (P || (P = Promise))(function(resolve, reject) {\n            function fulfilled(value) {\n                try {\n                    step(generator.next(value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function rejected(value) {\n                try {\n                    step(generator[\"throw\"](value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function step(result) {\n                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n            }\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\n        });\n    };\nvar __generator =\n    (this && this.__generator) ||\n    function(thisArg, body) {\n        var _ = {\n                label: 0,\n                sent: function() {\n                    if (t[0] & 1) throw t[1];\n                    return t[1];\n                },\n                trys: [],\n                ops: []\n            },\n            f,\n            y,\n            t,\n            g;\n        return (\n            (g = { next: verb(0), throw: verb(1), return: verb(2) }),\n            typeof Symbol === \"function\" &&\n                (g[Symbol.iterator] = function() {\n                    return this;\n                }),\n            g\n        );\n        function verb(n) {\n            return function(v) {\n                return step([n, v]);\n            };\n        }\n        function step(op) {\n            if (f) throw new TypeError(\"Generator is already executing.\");\n            while (_)\n                try {\n                    if (\n                        ((f = 1),\n                        y &&\n                            (t =\n                                op[0] & 2\n                                    ? y[\"return\"]\n                                    : op[0]\n                                    ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0)\n                                    : y.next) &&\n                            !(t = t.call(y, op[1])).done)\n                    )\n                        return t;\n                    if (((y = 0), t)) op = [op[0] & 2, t.value];\n                    switch (op[0]) {\n                        case 0:\n                        case 1:\n                            t = op;\n                            break;\n                        case 4:\n                            _.label++;\n                            return { value: op[1], done: false };\n                        case 5:\n                            _.label++;\n                            y = op[1];\n                            op = [0];\n                            continue;\n                        case 7:\n                            op = _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                        default:\n                            if (\n                                !((t = _.trys), (t = t.length > 0 && t[t.length - 1])) &&\n                                (op[0] === 6 || op[0] === 2)\n                            ) {\n                                _ = 0;\n                                continue;\n                            }\n                            if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {\n                                _.label = op[1];\n                                break;\n                            }\n                            if (op[0] === 6 && _.label < t[1]) {\n                                _.label = t[1];\n                                t = op;\n                                break;\n                            }\n                            if (t && _.label < t[2]) {\n                                _.label = t[2];\n                                _.ops.push(op);\n                                break;\n                            }\n                            if (t[2]) _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                    }\n                    op = body.call(thisArg, _);\n                } catch (e) {\n                    op = [6, e];\n                    y = 0;\n                } finally {\n                    f = t = 0;\n                }\n            if (op[0] & 5) throw op[1];\n            return { value: op[0] ? op[1] : void 0, done: true };\n        }\n    };\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar fetch_1 = require(\"./fetch\");\nvar recipeImplementation_1 = require(\"./recipeImplementation\");\nvar supertokens_js_override_1 = require(\"supertokens-js-override\");\nvar utils_1 = require(\"./utils\");\nvar AuthHttpRequest = /** @class */ (function() {\n    function AuthHttpRequest() {}\n    AuthHttpRequest.init = function(options) {\n        var config = utils_1.validateAndNormaliseInputOrThrowError(options);\n        var recipeImpl = new supertokens_js_override_1.default(recipeImplementation_1.default())\n            .override(config.override.functions)\n            .build();\n        fetch_1.default.init(config, recipeImpl);\n        AuthHttpRequest.axiosInterceptorQueue.forEach(function(f) {\n            f();\n        });\n        AuthHttpRequest.axiosInterceptorQueue = [];\n    };\n    AuthHttpRequest.getUserId = function() {\n        return fetch_1.default.recipeImpl.getUserId(fetch_1.default.config);\n    };\n    AuthHttpRequest.getAccessTokenPayloadSecurely = function() {\n        return __awaiter(this, void 0, void 0, function() {\n            return __generator(this, function(_a) {\n                return [2 /*return*/, fetch_1.default.recipeImpl.getAccessTokenPayloadSecurely(fetch_1.default.config)];\n            });\n        });\n    };\n    AuthHttpRequest.axiosInterceptorQueue = [];\n    AuthHttpRequest.attemptRefreshingSession = function() {\n        return __awaiter(void 0, void 0, void 0, function() {\n            return __generator(this, function(_a) {\n                return [2 /*return*/, fetch_1.default.attemptRefreshingSession()];\n            });\n        });\n    };\n    AuthHttpRequest.doesSessionExist = function() {\n        return fetch_1.default.recipeImpl.doesSessionExist(fetch_1.default.config);\n    };\n    AuthHttpRequest.addAxiosInterceptors = function(axiosInstance) {\n        if (!fetch_1.default.initCalled) {\n            // the recipe implementation has not been initialised yet, so add\n            // this to the queue and wait for it to be initialised, and then on\n            // init call, we add all the interceptors.\n            AuthHttpRequest.axiosInterceptorQueue.push(function() {\n                fetch_1.default.recipeImpl.addAxiosInterceptors(axiosInstance, fetch_1.default.config);\n            });\n        } else {\n            fetch_1.default.recipeImpl.addAxiosInterceptors(axiosInstance, fetch_1.default.config);\n        }\n    };\n    AuthHttpRequest.signOut = function() {\n        return fetch_1.default.recipeImpl.signOut(fetch_1.default.config);\n    };\n    return AuthHttpRequest;\n})();\nexports.default = AuthHttpRequest;\nexports.init = AuthHttpRequest.init;\nexports.getUserId = AuthHttpRequest.getUserId;\nexports.getAccessTokenPayloadSecurely = AuthHttpRequest.getAccessTokenPayloadSecurely;\nexports.attemptRefreshingSession = AuthHttpRequest.attemptRefreshingSession;\nexports.doesSessionExist = AuthHttpRequest.doesSessionExist;\nexports.addAxiosInterceptors = AuthHttpRequest.addAxiosInterceptors;\nexports.signOut = AuthHttpRequest.signOut;\n","\"use strict\";\n/* Copyright (c) 2021, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isAnIpAddress(ipaddress) {\n    return /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(\n        ipaddress\n    );\n}\nexports.isAnIpAddress = isAnIpAddress;\nvar NormalisedURLDomain = /** @class */ (function() {\n    function NormalisedURLDomain(url) {\n        var _this = this;\n        this.getAsStringDangerous = function() {\n            return _this.value;\n        };\n        this.value = normaliseURLDomainOrThrowError(url);\n    }\n    return NormalisedURLDomain;\n})();\nexports.default = NormalisedURLDomain;\nfunction normaliseURLDomainOrThrowError(input, ignoreProtocol) {\n    if (ignoreProtocol === void 0) {\n        ignoreProtocol = false;\n    }\n    input = input.trim();\n    try {\n        if (!input.startsWith(\"http://\") && !input.startsWith(\"https://\")) {\n            throw new Error(\"converting to proper URL\");\n        }\n        var urlObj = new URL(input);\n        if (ignoreProtocol) {\n            if (urlObj.hostname.startsWith(\"localhost\") || isAnIpAddress(urlObj.hostname)) {\n                input = \"http://\" + urlObj.host;\n            } else {\n                input = \"https://\" + urlObj.host;\n            }\n        } else {\n            input = urlObj.protocol + \"//\" + urlObj.host;\n        }\n        return input;\n        // eslint-disable-next-line no-empty\n    } catch (err) {}\n    if (input.startsWith(\"/\")) {\n        throw new Error(\"Please provide a valid domain name\");\n    }\n    // not a valid URL\n    if (input.indexOf(\".\") === 0) {\n        input = input.substr(1);\n    }\n    // If the input contains a . it means they have given a domain name.\n    // So we try assuming that they have given a domain name\n    if (\n        (input.indexOf(\".\") !== -1 || input.startsWith(\"localhost\")) &&\n        !input.startsWith(\"http://\") &&\n        !input.startsWith(\"https://\")\n    ) {\n        input = \"https://\" + input;\n        // at this point, it should be a valid URL. So we test that before doing a recursive call\n        try {\n            new URL(input);\n            return normaliseURLDomainOrThrowError(input, true);\n            // eslint-disable-next-line no-empty\n        } catch (err) {}\n    }\n    throw new Error(\"Please provide a valid domain name\");\n}\n","\"use strict\";\n/* Copyright (c) 2021, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar NormalisedURLPath = /** @class */ (function() {\n    function NormalisedURLPath(url) {\n        var _this = this;\n        this.startsWith = function(other) {\n            return _this.value.startsWith(other.value);\n        };\n        this.appendPath = function(other) {\n            return new NormalisedURLPath(_this.value + other.value);\n        };\n        this.getAsStringDangerous = function() {\n            return _this.value;\n        };\n        this.value = normaliseURLPathOrThrowError(url);\n    }\n    return NormalisedURLPath;\n})();\nexports.default = NormalisedURLPath;\nfunction normaliseURLPathOrThrowError(input) {\n    input = input.trim();\n    try {\n        if (!input.startsWith(\"http://\") && !input.startsWith(\"https://\")) {\n            throw new Error(\"converting to proper URL\");\n        }\n        var urlObj = new URL(input);\n        input = urlObj.pathname;\n        if (input.charAt(input.length - 1) === \"/\") {\n            return input.substr(0, input.length - 1);\n        }\n        return input;\n        // eslint-disable-next-line no-empty\n    } catch (err) {}\n    // not a valid URL\n    // If the input contains a . it means they have given a domain name.\n    // So we try assuming that they have given a domain name + path\n    if (\n        (domainGiven(input) || input.startsWith(\"localhost\")) &&\n        !input.startsWith(\"http://\") &&\n        !input.startsWith(\"https://\")\n    ) {\n        input = \"http://\" + input;\n        return normaliseURLPathOrThrowError(input);\n    }\n    if (input.charAt(0) !== \"/\") {\n        input = \"/\" + input;\n    }\n    // at this point, we should be able to convert it into a fake URL and recursively call this function.\n    try {\n        // test that we can convert this to prevent an infinite loop\n        new URL(\"http://example.com\" + input);\n        return normaliseURLPathOrThrowError(\"http://example.com\" + input);\n    } catch (err) {\n        throw new Error(\"Please provide a valid URL path\");\n    }\n}\nfunction domainGiven(input) {\n    // If no dot, return false.\n    if (input.indexOf(\".\") === -1 || input.startsWith(\"/\")) {\n        return false;\n    }\n    try {\n        var url = new URL(input);\n        return url.hostname.indexOf(\".\") !== -1;\n    } catch (e) {}\n    try {\n        var url = new URL(\"http://\" + input);\n        return url.hostname.indexOf(\".\") !== -1;\n    } catch (e) {}\n    return false;\n}\n","\"use strict\";\n/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar __awaiter =\n    (this && this.__awaiter) ||\n    function(thisArg, _arguments, P, generator) {\n        function adopt(value) {\n            return value instanceof P\n                ? value\n                : new P(function(resolve) {\n                      resolve(value);\n                  });\n        }\n        return new (P || (P = Promise))(function(resolve, reject) {\n            function fulfilled(value) {\n                try {\n                    step(generator.next(value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function rejected(value) {\n                try {\n                    step(generator[\"throw\"](value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function step(result) {\n                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n            }\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\n        });\n    };\nvar __generator =\n    (this && this.__generator) ||\n    function(thisArg, body) {\n        var _ = {\n                label: 0,\n                sent: function() {\n                    if (t[0] & 1) throw t[1];\n                    return t[1];\n                },\n                trys: [],\n                ops: []\n            },\n            f,\n            y,\n            t,\n            g;\n        return (\n            (g = { next: verb(0), throw: verb(1), return: verb(2) }),\n            typeof Symbol === \"function\" &&\n                (g[Symbol.iterator] = function() {\n                    return this;\n                }),\n            g\n        );\n        function verb(n) {\n            return function(v) {\n                return step([n, v]);\n            };\n        }\n        function step(op) {\n            if (f) throw new TypeError(\"Generator is already executing.\");\n            while (_)\n                try {\n                    if (\n                        ((f = 1),\n                        y &&\n                            (t =\n                                op[0] & 2\n                                    ? y[\"return\"]\n                                    : op[0]\n                                    ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0)\n                                    : y.next) &&\n                            !(t = t.call(y, op[1])).done)\n                    )\n                        return t;\n                    if (((y = 0), t)) op = [op[0] & 2, t.value];\n                    switch (op[0]) {\n                        case 0:\n                        case 1:\n                            t = op;\n                            break;\n                        case 4:\n                            _.label++;\n                            return { value: op[1], done: false };\n                        case 5:\n                            _.label++;\n                            y = op[1];\n                            op = [0];\n                            continue;\n                        case 7:\n                            op = _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                        default:\n                            if (\n                                !((t = _.trys), (t = t.length > 0 && t[t.length - 1])) &&\n                                (op[0] === 6 || op[0] === 2)\n                            ) {\n                                _ = 0;\n                                continue;\n                            }\n                            if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {\n                                _.label = op[1];\n                                break;\n                            }\n                            if (op[0] === 6 && _.label < t[1]) {\n                                _.label = t[1];\n                                t = op;\n                                break;\n                            }\n                            if (t && _.label < t[2]) {\n                                _.label = t[2];\n                                _.ops.push(op);\n                                break;\n                            }\n                            if (t[2]) _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                    }\n                    op = body.call(thisArg, _);\n                } catch (e) {\n                    op = [6, e];\n                    y = 0;\n                } finally {\n                    f = t = 0;\n                }\n            if (op[0] & 5) throw op[1];\n            return { value: op[0] ? op[1] : void 0, done: true };\n        }\n    };\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PROCESS_STATE;\n(function(PROCESS_STATE) {\n    //CALLING_INTERCEPTION_REQUEST : Process state for the request interceptor.\n    //CALLING_INTERCEPTION_RESOPONSE : Process state for the response interceptor.\n    PROCESS_STATE[(PROCESS_STATE[\"CALLING_INTERCEPTION_REQUEST\"] = 0)] = \"CALLING_INTERCEPTION_REQUEST\";\n    PROCESS_STATE[(PROCESS_STATE[\"CALLING_INTERCEPTION_RESPONSE\"] = 1)] = \"CALLING_INTERCEPTION_RESPONSE\";\n})((PROCESS_STATE = exports.PROCESS_STATE || (exports.PROCESS_STATE = {})));\nvar ProcessState = /** @class */ (function() {\n    function ProcessState() {\n        var _this = this;\n        this.history = [];\n        this.addState = function(state) {\n            try {\n                if (process !== undefined && process.env !== undefined && process.env.TEST_MODE === \"testing\") {\n                    _this.history.push(state);\n                }\n            } catch (ignored) {}\n        };\n        this.getEventByLastEventByName = function(state) {\n            for (var i = _this.history.length - 1; i >= 0; i--) {\n                if (_this.history[i] == state) {\n                    return _this.history[i];\n                }\n            }\n            return undefined;\n        };\n        this.reset = function() {\n            _this.history = [];\n        };\n        this.waitForEvent = function(state, timeInMS) {\n            if (timeInMS === void 0) {\n                timeInMS = 7000;\n            }\n            return __awaiter(_this, void 0, void 0, function() {\n                var startTime;\n                var _this = this;\n                return __generator(this, function(_a) {\n                    startTime = Date.now();\n                    return [\n                        2 /*return*/,\n                        new Promise(function(resolve) {\n                            var actualThis = _this;\n                            function tryAndGet() {\n                                var result = actualThis.getEventByLastEventByName(state);\n                                if (result === undefined) {\n                                    if (Date.now() - startTime > timeInMS) {\n                                        resolve(undefined);\n                                    } else {\n                                        setTimeout(tryAndGet, 1000);\n                                    }\n                                } else {\n                                    resolve(result);\n                                }\n                            }\n                            tryAndGet();\n                        })\n                    ];\n                });\n            });\n        };\n    }\n    ProcessState.getInstance = function() {\n        if (ProcessState.instance == undefined) {\n            ProcessState.instance = new ProcessState();\n        }\n        return ProcessState.instance;\n    };\n    return ProcessState;\n})();\nexports.ProcessState = ProcessState;\n","\"use strict\";\nvar __assign =\n    (this && this.__assign) ||\n    function() {\n        __assign =\n            Object.assign ||\n            function(t) {\n                for (var s, i = 1, n = arguments.length; i < n; i++) {\n                    s = arguments[i];\n                    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n                }\n                return t;\n            };\n        return __assign.apply(this, arguments);\n    };\nvar __awaiter =\n    (this && this.__awaiter) ||\n    function(thisArg, _arguments, P, generator) {\n        function adopt(value) {\n            return value instanceof P\n                ? value\n                : new P(function(resolve) {\n                      resolve(value);\n                  });\n        }\n        return new (P || (P = Promise))(function(resolve, reject) {\n            function fulfilled(value) {\n                try {\n                    step(generator.next(value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function rejected(value) {\n                try {\n                    step(generator[\"throw\"](value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function step(result) {\n                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n            }\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\n        });\n    };\nvar __generator =\n    (this && this.__generator) ||\n    function(thisArg, body) {\n        var _ = {\n                label: 0,\n                sent: function() {\n                    if (t[0] & 1) throw t[1];\n                    return t[1];\n                },\n                trys: [],\n                ops: []\n            },\n            f,\n            y,\n            t,\n            g;\n        return (\n            (g = { next: verb(0), throw: verb(1), return: verb(2) }),\n            typeof Symbol === \"function\" &&\n                (g[Symbol.iterator] = function() {\n                    return this;\n                }),\n            g\n        );\n        function verb(n) {\n            return function(v) {\n                return step([n, v]);\n            };\n        }\n        function step(op) {\n            if (f) throw new TypeError(\"Generator is already executing.\");\n            while (_)\n                try {\n                    if (\n                        ((f = 1),\n                        y &&\n                            (t =\n                                op[0] & 2\n                                    ? y[\"return\"]\n                                    : op[0]\n                                    ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0)\n                                    : y.next) &&\n                            !(t = t.call(y, op[1])).done)\n                    )\n                        return t;\n                    if (((y = 0), t)) op = [op[0] & 2, t.value];\n                    switch (op[0]) {\n                        case 0:\n                        case 1:\n                            t = op;\n                            break;\n                        case 4:\n                            _.label++;\n                            return { value: op[1], done: false };\n                        case 5:\n                            _.label++;\n                            y = op[1];\n                            op = [0];\n                            continue;\n                        case 7:\n                            op = _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                        default:\n                            if (\n                                !((t = _.trys), (t = t.length > 0 && t[t.length - 1])) &&\n                                (op[0] === 6 || op[0] === 2)\n                            ) {\n                                _ = 0;\n                                continue;\n                            }\n                            if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {\n                                _.label = op[1];\n                                break;\n                            }\n                            if (op[0] === 6 && _.label < t[1]) {\n                                _.label = t[1];\n                                t = op;\n                                break;\n                            }\n                            if (t && _.label < t[2]) {\n                                _.label = t[2];\n                                _.ops.push(op);\n                                break;\n                            }\n                            if (t[2]) _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                    }\n                    op = body.call(thisArg, _);\n                } catch (e) {\n                    op = [6, e];\n                    y = 0;\n                } finally {\n                    f = t = 0;\n                }\n            if (op[0] & 5) throw op[1];\n            return { value: op[0] ? op[1] : void 0, done: true };\n        }\n    };\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar fetch_1 = require(\"./fetch\");\nvar axios_1 = require(\"./axios\");\nvar version_1 = require(\"./version\");\nfunction RecipeImplementation() {\n    return {\n        addFetchInterceptorsAndReturnModifiedFetch: function(originalFetch, _) {\n            return function(url, config) {\n                return __awaiter(this, void 0, void 0, function() {\n                    return __generator(this, function(_a) {\n                        switch (_a.label) {\n                            case 0:\n                                return [\n                                    4 /*yield*/,\n                                    fetch_1.default.doRequest(\n                                        function(config) {\n                                            return originalFetch(\n                                                typeof url === \"string\" ? url : url.clone(),\n                                                __assign({}, config)\n                                            );\n                                        },\n                                        config,\n                                        url\n                                    )\n                                ];\n                            case 1:\n                                return [2 /*return*/, _a.sent()];\n                        }\n                    });\n                });\n            };\n        },\n        addAxiosInterceptors: function(axiosInstance, _) {\n            // we first check if this axiosInstance already has our interceptors.\n            var requestInterceptors = axiosInstance.interceptors.request;\n            for (var i = 0; i < requestInterceptors.handlers.length; i++) {\n                if (requestInterceptors.handlers[i].fulfilled === axios_1.interceptorFunctionRequestFulfilled) {\n                    return;\n                }\n            }\n            // Add a request interceptor\n            axiosInstance.interceptors.request.use(axios_1.interceptorFunctionRequestFulfilled, function(error) {\n                return __awaiter(this, void 0, void 0, function() {\n                    return __generator(this, function(_a) {\n                        throw error;\n                    });\n                });\n            });\n            // Add a response interceptor\n            axiosInstance.interceptors.response.use(\n                axios_1.responseInterceptor(axiosInstance),\n                axios_1.responseErrorInterceptor(axiosInstance)\n            );\n        },\n        getUserId: function(_) {\n            return __awaiter(this, void 0, void 0, function() {\n                var tokenInfo;\n                return __generator(this, function(_a) {\n                    switch (_a.label) {\n                        case 0:\n                            return [4 /*yield*/, fetch_1.FrontToken.getTokenInfo()];\n                        case 1:\n                            tokenInfo = _a.sent();\n                            if (tokenInfo === undefined) {\n                                throw new Error(\"No session exists\");\n                            }\n                            return [2 /*return*/, tokenInfo.uid];\n                    }\n                });\n            });\n        },\n        getAccessTokenPayloadSecurely: function(config) {\n            return __awaiter(this, void 0, void 0, function() {\n                var tokenInfo, retry;\n                return __generator(this, function(_a) {\n                    switch (_a.label) {\n                        case 0:\n                            return [4 /*yield*/, fetch_1.FrontToken.getTokenInfo()];\n                        case 1:\n                            tokenInfo = _a.sent();\n                            if (tokenInfo === undefined) {\n                                throw new Error(\"No session exists\");\n                            }\n                            if (!(tokenInfo.ate < Date.now())) return [3 /*break*/, 5];\n                            return [4 /*yield*/, fetch_1.default.attemptRefreshingSession()];\n                        case 2:\n                            retry = _a.sent();\n                            if (!retry) return [3 /*break*/, 4];\n                            return [4 /*yield*/, this.getAccessTokenPayloadSecurely(config)];\n                        case 3:\n                            return [2 /*return*/, _a.sent()];\n                        case 4:\n                            throw new Error(\"Could not refresh session\");\n                        case 5:\n                            return [2 /*return*/, tokenInfo.up];\n                    }\n                });\n            });\n        },\n        doesSessionExist: function(_) {\n            return __awaiter(this, void 0, void 0, function() {\n                return __generator(this, function(_a) {\n                    switch (_a.label) {\n                        case 0:\n                            return [4 /*yield*/, fetch_1.getIdRefreshToken(true)];\n                        case 1:\n                            return [2 /*return*/, _a.sent().status === \"EXISTS\"];\n                    }\n                });\n            });\n        },\n        signOut: function(config) {\n            return __awaiter(this, void 0, void 0, function() {\n                var preAPIResult, resp;\n                return __generator(this, function(_a) {\n                    switch (_a.label) {\n                        case 0:\n                            return [4 /*yield*/, this.doesSessionExist(config)];\n                        case 1:\n                            if (!_a.sent()) {\n                                config.onHandleEvent({\n                                    action: \"SIGN_OUT\"\n                                });\n                                return [2 /*return*/];\n                            }\n                            return [\n                                4 /*yield*/,\n                                config.preAPIHook({\n                                    action: \"SIGN_OUT\",\n                                    requestInit: {\n                                        method: \"post\",\n                                        headers: {\n                                            \"fdi-version\": version_1.supported_fdi.join(\",\"),\n                                            rid: fetch_1.default.rid\n                                        }\n                                    },\n                                    url: fetch_1.default.signOutUrl\n                                })\n                            ];\n                        case 2:\n                            preAPIResult = _a.sent();\n                            return [4 /*yield*/, fetch(preAPIResult.url, preAPIResult.requestInit)];\n                        case 3:\n                            resp = _a.sent();\n                            if (resp.status === config.sessionExpiredStatusCode) {\n                                // refresh must have already sent session expiry event\n                                return [2 /*return*/];\n                            }\n                            if (resp.status >= 300) {\n                                throw resp;\n                            }\n                            return [2 /*return*/];\n                    }\n                });\n            });\n        }\n    };\n}\nexports.default = RecipeImplementation;\n","\"use strict\";\n/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar __assign =\n    (this && this.__assign) ||\n    function() {\n        __assign =\n            Object.assign ||\n            function(t) {\n                for (var s, i = 1, n = arguments.length; i < n; i++) {\n                    s = arguments[i];\n                    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n                }\n                return t;\n            };\n        return __assign.apply(this, arguments);\n    };\nvar __awaiter =\n    (this && this.__awaiter) ||\n    function(thisArg, _arguments, P, generator) {\n        function adopt(value) {\n            return value instanceof P\n                ? value\n                : new P(function(resolve) {\n                      resolve(value);\n                  });\n        }\n        return new (P || (P = Promise))(function(resolve, reject) {\n            function fulfilled(value) {\n                try {\n                    step(generator.next(value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function rejected(value) {\n                try {\n                    step(generator[\"throw\"](value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function step(result) {\n                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n            }\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\n        });\n    };\nvar __generator =\n    (this && this.__generator) ||\n    function(thisArg, body) {\n        var _ = {\n                label: 0,\n                sent: function() {\n                    if (t[0] & 1) throw t[1];\n                    return t[1];\n                },\n                trys: [],\n                ops: []\n            },\n            f,\n            y,\n            t,\n            g;\n        return (\n            (g = { next: verb(0), throw: verb(1), return: verb(2) }),\n            typeof Symbol === \"function\" &&\n                (g[Symbol.iterator] = function() {\n                    return this;\n                }),\n            g\n        );\n        function verb(n) {\n            return function(v) {\n                return step([n, v]);\n            };\n        }\n        function step(op) {\n            if (f) throw new TypeError(\"Generator is already executing.\");\n            while (_)\n                try {\n                    if (\n                        ((f = 1),\n                        y &&\n                            (t =\n                                op[0] & 2\n                                    ? y[\"return\"]\n                                    : op[0]\n                                    ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0)\n                                    : y.next) &&\n                            !(t = t.call(y, op[1])).done)\n                    )\n                        return t;\n                    if (((y = 0), t)) op = [op[0] & 2, t.value];\n                    switch (op[0]) {\n                        case 0:\n                        case 1:\n                            t = op;\n                            break;\n                        case 4:\n                            _.label++;\n                            return { value: op[1], done: false };\n                        case 5:\n                            _.label++;\n                            y = op[1];\n                            op = [0];\n                            continue;\n                        case 7:\n                            op = _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                        default:\n                            if (\n                                !((t = _.trys), (t = t.length > 0 && t[t.length - 1])) &&\n                                (op[0] === 6 || op[0] === 2)\n                            ) {\n                                _ = 0;\n                                continue;\n                            }\n                            if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {\n                                _.label = op[1];\n                                break;\n                            }\n                            if (op[0] === 6 && _.label < t[1]) {\n                                _.label = t[1];\n                                t = op;\n                                break;\n                            }\n                            if (t && _.label < t[2]) {\n                                _.label = t[2];\n                                _.ops.push(op);\n                                break;\n                            }\n                            if (t[2]) _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                    }\n                    op = body.call(thisArg, _);\n                } catch (e) {\n                    op = [6, e];\n                    y = 0;\n                } finally {\n                    f = t = 0;\n                }\n            if (op[0] & 5) throw op[1];\n            return { value: op[0] ? op[1] : void 0, done: true };\n        }\n    };\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar normalisedURLDomain_1 = require(\"./normalisedURLDomain\");\nvar normalisedURLPath_1 = require(\"./normalisedURLPath\");\nfunction normaliseURLDomainOrThrowError(input) {\n    var str = new normalisedURLDomain_1.default(input).getAsStringDangerous();\n    return str;\n}\nexports.normaliseURLDomainOrThrowError = normaliseURLDomainOrThrowError;\nfunction normaliseURLPathOrThrowError(input) {\n    return new normalisedURLPath_1.default(input).getAsStringDangerous();\n}\nexports.normaliseURLPathOrThrowError = normaliseURLPathOrThrowError;\nfunction normaliseSessionScopeOrThrowError(sessionScope) {\n    function helper(sessionScope) {\n        sessionScope = sessionScope.trim().toLowerCase();\n        // first we convert it to a URL so that we can use the URL class\n        if (sessionScope.startsWith(\".\")) {\n            sessionScope = sessionScope.substr(1);\n        }\n        if (!sessionScope.startsWith(\"http://\") && !sessionScope.startsWith(\"https://\")) {\n            sessionScope = \"http://\" + sessionScope;\n        }\n        try {\n            var urlObj = new URL(sessionScope);\n            sessionScope = urlObj.hostname;\n            // remove leading dot\n            if (sessionScope.startsWith(\".\")) {\n                sessionScope = sessionScope.substr(1);\n            }\n            return sessionScope;\n        } catch (err) {\n            throw new Error(\"Please provide a valid sessionScope\");\n        }\n    }\n    var noDotNormalised = helper(sessionScope);\n    if (noDotNormalised === \"localhost\" || normalisedURLDomain_1.isAnIpAddress(noDotNormalised)) {\n        return noDotNormalised;\n    }\n    if (sessionScope.startsWith(\".\")) {\n        return \".\" + noDotNormalised;\n    }\n    return noDotNormalised;\n}\nexports.normaliseSessionScopeOrThrowError = normaliseSessionScopeOrThrowError;\nfunction validateAndNormaliseInputOrThrowError(options) {\n    var _this = this;\n    var apiDomain = normaliseURLDomainOrThrowError(options.apiDomain);\n    var apiBasePath = normaliseURLPathOrThrowError(\"/auth\");\n    if (options.apiBasePath !== undefined) {\n        apiBasePath = normaliseURLPathOrThrowError(options.apiBasePath);\n    }\n    // See https://github.com/supertokens/supertokens-website/issues/98\n    var sessionScope = normaliseSessionScopeOrThrowError(\n        options !== undefined && options.sessionScope !== undefined\n            ? options.sessionScope\n            : getWindowOrThrow().location.hostname\n    );\n    var sessionExpiredStatusCode = 401;\n    if (options.sessionExpiredStatusCode !== undefined) {\n        sessionExpiredStatusCode = options.sessionExpiredStatusCode;\n    }\n    var autoAddCredentials = true;\n    if (options.autoAddCredentials !== undefined) {\n        autoAddCredentials = options.autoAddCredentials;\n    }\n    var isInIframe = false;\n    if (options.isInIframe !== undefined) {\n        isInIframe = options.isInIframe;\n    }\n    var cookieDomain = undefined;\n    if (options.cookieDomain !== undefined) {\n        cookieDomain = normaliseSessionScopeOrThrowError(options.cookieDomain);\n    }\n    var preAPIHook = function(context) {\n        return __awaiter(_this, void 0, void 0, function() {\n            return __generator(this, function(_a) {\n                return [2 /*return*/, { url: context.url, requestInit: context.requestInit }];\n            });\n        });\n    };\n    if (options.preAPIHook !== undefined) {\n        preAPIHook = options.preAPIHook;\n    }\n    var onHandleEvent = function() {};\n    if (options.onHandleEvent !== undefined) {\n        onHandleEvent = options.onHandleEvent;\n    }\n    var override = __assign(\n        {\n            functions: function(oI) {\n                return oI;\n            }\n        },\n        options.override\n    );\n    return {\n        apiDomain: apiDomain,\n        apiBasePath: apiBasePath,\n        sessionScope: sessionScope,\n        sessionExpiredStatusCode: sessionExpiredStatusCode,\n        autoAddCredentials: autoAddCredentials,\n        isInIframe: isInIframe,\n        cookieDomain: cookieDomain,\n        preAPIHook: preAPIHook,\n        onHandleEvent: onHandleEvent,\n        override: override\n    };\n}\nexports.validateAndNormaliseInputOrThrowError = validateAndNormaliseInputOrThrowError;\nfunction getWindowOrThrow() {\n    if (typeof window === \"undefined\") {\n        throw Error(\n            \"If you are using this package with server-side rendering, please make sure that you are checking if the window object is defined.\"\n        );\n    }\n    return window;\n}\nexports.getWindowOrThrow = getWindowOrThrow;\nfunction shouldDoInterceptionBasedOnUrl(toCheckUrl, apiDomain, cookieDomain) {\n    function isNumeric(str) {\n        if (typeof str != \"string\") return false; // we only process strings!\n        return (\n            !isNaN(str) && !isNaN(parseFloat(str)) // use type coercion to parse the _entirety_ of the string (`parseFloat` alone does not do this)...\n        ); // ...and ensure strings of whitespace fail\n    }\n    toCheckUrl = normaliseURLDomainOrThrowError(toCheckUrl);\n    var urlObj = new URL(toCheckUrl);\n    var domain = urlObj.hostname;\n    if (cookieDomain === undefined) {\n        domain = urlObj.port === \"\" ? domain : domain + \":\" + urlObj.port;\n        apiDomain = normaliseURLDomainOrThrowError(apiDomain);\n        var apiUrlObj = new URL(apiDomain);\n        return domain === (apiUrlObj.port === \"\" ? apiUrlObj.hostname : apiUrlObj.hostname + \":\" + apiUrlObj.port);\n    } else {\n        var normalisedCookieDomain = normaliseSessionScopeOrThrowError(cookieDomain);\n        if (cookieDomain.split(\":\").length > 1) {\n            // means port may provided\n            var portStr = cookieDomain.split(\":\")[cookieDomain.split(\":\").length - 1];\n            if (isNumeric(portStr)) {\n                normalisedCookieDomain += \":\" + portStr;\n                domain = urlObj.port === \"\" ? domain : domain + \":\" + urlObj.port;\n            }\n        }\n        if (cookieDomain.startsWith(\".\")) {\n            return (\".\" + domain).endsWith(normalisedCookieDomain);\n        } else {\n            return domain === normalisedCookieDomain;\n        }\n    }\n}\nexports.shouldDoInterceptionBasedOnUrl = shouldDoInterceptionBasedOnUrl;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nexports.package_version = \"10.0.10\";\nexports.supported_fdi = [\"1.8\", \"1.9\", \"1.10\", \"1.11\", \"1.12\", \"1.13\"];\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","class Data {\r\n    constructor() {\r\n        this._data = {};\r\n    }\r\n\r\n    set(uid, key, value) {\r\n        if(!this._data.hasOwnProperty(uid)) {\r\n            this._data[uid] = {};\r\n        }\r\n\r\n        this._data[uid][key] = value;\r\n    }\r\n\r\n    get(uid, key) {\r\n        if(!this._data.hasOwnProperty(uid)) {\r\n            return undefined;\r\n        }\r\n\r\n        return this._data[uid][key];\r\n    }\r\n\r\n    destroy(uid) {\r\n        if(this._data.hasOwnProperty(uid)) {\r\n            delete this._data[uid];\r\n        }\r\n    }\r\n}\r\n\r\nData.uid = 1;\r\n\r\nexport default Data;","import Data from './Data';\n\n/**\n * Wrap an element around Bulma.\n * @param {String|HTMLElement} selector The selector or HTMLElement to wrap.\n */\nfunction Bulma(selector) {\n    if (!(this instanceof Bulma)) {\n        return new Bulma(selector);\n    }\n\n    if (selector instanceof Bulma) {\n        return selector;\n    }\n\n    if (selector instanceof HTMLElement) {\n        this._elem = selector;\n    } else {\n        this._elem = document.querySelector(selector);\n    }\n\n    if (!selector) {\n        this._elem = document.createElement('div');\n    }\n\n    if (!this._elem.hasOwnProperty(Bulma.id)) {\n        this._elem[Bulma.id] = Data.uid++;\n    }\n\n    return this;\n}\n\n/**\n * Current BulmaJS version.\n * @type {String}\n */\nBulma.VERSION = '0.12.1';\n\n/**\n * Unique ID of Bulma\n * @type {String}\n */\nBulma.id = 'bulma-' + new Date().getTime();\n\n/**\n * Global data cache for HTML elements\n * @type {Data}\n */\nBulma.cache = new Data();\n\n/**\n * An index of the registered plugins\n * @type {Object}\n */\nBulma.plugins = {};\n\n/**\n * Helper method to create a new plugin.\n * @param  {String} key The plugin's key\n * @param  {Object} config The config to be passed to the plugin\n * @return {Object} The newly created plugin instance\n */\nBulma.create = (key, config) => {\n    if (!key || !Bulma.plugins.hasOwnProperty(key)) {\n        throw new Error('[BulmaJS] A plugin with the key \\'' + key + '\\' has not been registered.');\n    }\n\n    return new Bulma.plugins[key].handler(config);\n};\n\n/**\n * Register a new plugin\n * @param  {String} key The key to register the plugin under\n * @param  {Object} plugin The plugin's main constructor\n * @param  {number?} priority The priority this plugin has over other plugins. Higher means the plugin is registered before lower.\n * @return {undefined}\n */\nBulma.registerPlugin = (key, plugin, priority = 0) => {\n    if (!key) {\n        throw new Error('[BulmaJS] Key attribute is required.');\n    }\n\n    Bulma.plugins[key] = {\n        priority: priority,\n        handler: plugin\n    };\n\n    Bulma.prototype[key] = function (config) {\n        return new Bulma.plugins[key].handler(config, this);\n    };\n};\n\n/**\n * Parse the HTML DOM searching for data-bulma attributes. We will then pass\n * each element to the appropriate plugin to handle the required processing.\n * @param  {HTMLElement} root The root of the document we're going to parse.\n * @return {undefined}\n */\nBulma.parseDocument = (root = document) => {\n    let sortedPlugins = Object.keys(Bulma.plugins)\n        .sort((a, b) => Bulma.plugins[a].priority < Bulma.plugins[b].priority);\n\n    Bulma.each(sortedPlugins, (key) => {\n        if (!Bulma.plugins[key].handler.hasOwnProperty('parseDocument')) {\n            // eslint-disable-next-line no-console\n            console.error('[BulmaJS] Plugin ' + key + ' does not have a parseDocument method. Automatic document parsing is not possible for this plugin.');\n            return;\n        }\n\n        Bulma.plugins[key].handler.parseDocument(root);\n    });\n};\n\n/**\n * Create an element and assign classes\n * @param {string} name The name of the element to create\n * @param {array} classes An array of classes to add to the element\n * @return {HTMLElement} The newly created element\n */\nBulma.createElement = (name, classes) => {\n    if (!classes) {\n        classes = [];\n    }\n\n    if (typeof classes === 'string') {\n        classes = [classes];\n    }\n\n    let elem = document.createElement(name);\n\n    Bulma.each(classes, (className) => {\n        elem.classList.add(className);\n    });\n\n    return elem;\n};\n\n/**\n * Find an element otherwise create a new one.\n * @param {string} query The CSS selector query to find\n * @param {HTMLElement|null} parent The parent we want to search/create within\n * @param {[string]} elemName The name of the element to create\n * @param {[array]} classes The classes to apply to the element\n * @returns {HTMLElement} The HTML element we found or created\n */\nBulma.findOrCreateElement = (query, parent = document, elemName = 'div', classes = []) => {\n    var elem = parent.querySelector(query);\n\n    if (!elem) {\n        if (classes.length === 0) {\n            classes = query.split('.').filter((item) => {\n                return item;\n            });\n        }\n\n        var newElem = Bulma.createElement(elemName, classes);\n\n        parent.appendChild(newElem);\n\n        return newElem;\n    }\n\n    return elem;\n};\n\n/**\n * For loop helper\n * @param {*} objects The array/object to loop through\n * @param {*} callback The callback used for each item\n */\nBulma.each = (objects, callback) => {\n    let i;\n\n    for (i = 0; i < objects.length; i++) {\n        callback(objects[i], i);\n    }\n};\n\n/**\n * Make an AJAX GET request to the specified URL. Stripping any script tags from the response.\n * @param {*} url The url to send the request to\n * @returns {Promise} Returns a promise containing the response HTML or error\n */\nBulma.ajax = (url) => {\n    return new Promise((resolve, reject) => {\n        var request = new XMLHttpRequest();\n        request.open('GET', url, true);\n\n        request.onload = () => {\n            if (request.status >= 200 && request.status < 400) {\n                resolve(Bulma._stripScripts(request.responseText));\n            } else {\n                reject();\n            }\n        };\n\n        request.onerror = () => reject();\n\n        request.send();\n    });\n};\n\n/**\n * Strip any script tags from a HTML string.\n * @param {string} htmlString \n * @returns {string} The cleaned HTML string\n * \n * @private\n */\nBulma._stripScripts = (htmlString) => {\n    var div = document.createElement('div');\n    div.innerHTML = htmlString;\n\n    var scripts = div.getElementsByTagName('script');\n\n    var i = scripts.length;\n\n    while (i--) {\n        scripts[i].parentNode.removeChild(scripts[i]);\n    }\n\n    return div.innerHTML.replace(/  +/g, ' ');\n};\n\n/**\n * Grabs a configuration property from the window.bulmaOptions global, if it's defined,\n * returns defaultValue otherwise.\n * @param {string} key The name of the option to check for\n * @param {*} [defaultValue=null] A default value of the key is not found\n */\nBulma.getGlobalConfig = function (key, defaultValue = null) {\n    if (!window.hasOwnProperty('bulmaOptions')) {\n        return defaultValue;\n    }\n\n    if (!window.bulmaOptions.hasOwnProperty(key)) {\n        return defaultValue;\n    }\n\n    return window.bulmaOptions[key];\n};\n\n/**\n * Get or set custom data on a Bulma element.\n * @type {String} key\n * @type {any} value\n * @returns {Bulma}\n */\nBulma.prototype.data = function (key, value) {\n    if (!value) {\n        return Bulma.cache.get(this._elem[Bulma.id], key);\n    }\n\n    Bulma.cache.set(this._elem[Bulma.id], key, value);\n\n    return this;\n};\n\n/**\n * Destroy the data for an element.\n * @returns {Bulma}\n */\nBulma.prototype.destroyData = function () {\n    Bulma.cache.destroy(this._elem[Bulma.id]);\n\n    return this;\n};\n\n/**\n * Returns the internal HTMLElement we're wrapping.\n *\n * @returns {HTMLElement}\n */\nBulma.prototype.getElement = function () {\n    return this._elem;\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    if (Bulma.getGlobalConfig('autoParseDocument', true)) {\n        Bulma.parseDocument();\n    }\n\n    if (Bulma.getGlobalConfig('onLoaded')) {\n        Bulma.getGlobalConfig('onLoaded')();\n    }\n});\n\nexport default Bulma;\n","/**\r\n * Object to hold a plugin's configuration\r\n * @class ConfigBag\r\n * @since 0.11.0\r\n * @author Thomas Erbe <vizuaalog@gmail.com>\r\n */\r\nexport default class ConfigBag {\r\n    constructor(initialConfig = []) {\r\n        if(typeof initialConfig !== 'object') {\r\n            throw new TypeError('initialConfig must be of type object.');\r\n        }\r\n\r\n        this._items = initialConfig;\r\n    }\r\n\r\n    /**\r\n     * Set a new config property\r\n     * @param {string} key The config property's key\r\n     * @param {mixed} value The config property's value\r\n     */\r\n    set(key, value) {\r\n        if(!key || !value) {\r\n            throw new Error('A key and value must be provided when setting a new option.');\r\n        }\r\n\r\n        this._items[key] = value;\r\n    }\r\n\r\n    /**\r\n     * Check if a key exists\r\n     * @param {string} key\r\n     * @returns {boolean}\r\n     */\r\n    has(key) {\r\n        if(!key) {\r\n            throw new Error('A key must be provided.');\r\n        }\r\n\r\n        return (this._items.hasOwnProperty(key) && this._items[key]);\r\n    }\r\n\r\n    /**\r\n     * Get a property by it's key. Returns the defaultValue if it doesn't exists\r\n     * @param {string} key \r\n     * @param {mixed} defaultValue\r\n     * @returns {mixed}\r\n     */\r\n    get(key, defaultValue = null) {\r\n        if(defaultValue && !this.has(key)) {\r\n            if(typeof defaultValue === 'function') {\r\n                return defaultValue();\r\n            }\r\n            \r\n            return defaultValue;\r\n        }\r\n\r\n        return this._items[key];\r\n    }\r\n}","import ConfigBag from './ConfigBag';\r\nimport Bulma from './core';\r\n\r\n/**\r\n * Base plugin class. Provides basic, common functionality.\r\n * @class Plugin\r\n * @since 0.7.0\r\n * @author  Thomas Erbe <vizuaalog@gmail.com>\r\n */\r\nexport default class Plugin {\r\n    /**\r\n     * Returns an object containing the default config for this plugin.\r\n     * @returns {object} The default config object.\r\n     */\r\n    static defaultConfig() {\r\n        return {};\r\n    }\r\n\r\n    /**\r\n     * Create a plugin.\r\n     * @param {object} config The config for this plugin\r\n     */\r\n    constructor(config = {}, root) {\r\n        config.root = (root instanceof Bulma) ? root._elem : root;\r\n\r\n        this.config = new ConfigBag({...this.constructor.defaultConfig(), ...config});\r\n\r\n        if(!root && !this.config.has('parent')) {\r\n            throw new Error('A plugin requires a root and/or a parent.');\r\n        }\r\n\r\n        this.parent = this.config.get('parent', config.root ? config.root.parentNode : null);\r\n\r\n        this._events = {};\r\n    }\r\n\r\n    on(event, callback) {\r\n        if(!this._events.hasOwnProperty(event)) {\r\n            this._events[event] = [];\r\n        }\r\n\r\n        this._events[event].push(callback);\r\n    }\r\n\r\n    trigger(event, data = {}) {\r\n        if(!this._events.hasOwnProperty(event)) {\r\n            return;\r\n        }\r\n\r\n        for(let i = 0; i < this._events[event].length; i++) {\r\n            this._events[event][i](data);\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        Bulma(this.root).destroyData();\r\n    }\r\n}","import Bulma from './core';\r\nimport Plugin from './plugin';\r\n\r\n/**\r\n * @module DismissableComponent\r\n * @since  0.2.0\r\n * @author  Thomas Erbe <vizuaalog@gmail.com>\r\n */\r\nexport default class DismissableComponent extends Plugin {\r\n    /**\r\n     * Returns an object containing the default config for this plugin.\r\n     * @returns {object} The default config object.\r\n     */\r\n    static defaultConfig() {\r\n        return {\r\n            isDismissable: false,\r\n            destroyOnDismiss: true,\r\n            element: null\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Plugin constructor\r\n     * @param  {string} name Plugin's name\r\n     * @param  {Object} config Plugin's config\r\n     * @return {this} The new plugin instance\r\n     */\r\n    constructor(name, config, root) {\r\n        if(!root._elem.classList.contains(name)) {\r\n            config['parent'] = root;\r\n            root = null;\r\n        }\r\n\r\n        super(config, root);\r\n\r\n        /**\r\n         * The name of this component, this will be used as the root class\r\n         * @type {string}\r\n         */\r\n        this.name = name;\r\n\r\n        /**\r\n        * Body text.\r\n        * @type {string}\r\n        */\r\n        this.body = this.config.get('body');\r\n        \r\n        /**\r\n        * Color modifier.\r\n        * @type {string} Possible values are null, primary, info, success, warning, danger\r\n        */\r\n        this.color = this.config.get('color');\r\n        \r\n        /**\r\n        * How long to wait before auto dismissing the component.\r\n        * @type {int|null} If null component must be dismissed manually.\r\n        */\r\n        this.dismissInterval = this.config.get('dismissInterval') ? this.createDismissInterval(this.config.get('dismissInterval')) : null;\r\n        \r\n        /**\r\n        * Does this component have a dismiss button?\r\n        * @type {Boolean}\r\n        */\r\n        this.isDismissable = this.config.get('isDismissable');\r\n        \r\n        /**\r\n        * Should this component be destroyed when it is dismissed.\r\n        * @type {Boolean}\r\n        */\r\n        this.destroyOnDismiss = this.config.get('destroyOnDismiss');\r\n\r\n        // TODO: Make internal element references all be a Bulma instance. This will keep consistency.\r\n        if(!(this.parent instanceof Bulma)) {\r\n            this.parent = Bulma(this.parent);\r\n        }\r\n        \r\n        /**\r\n        * The root element.\r\n        * @type {HTMLElement|null} If this is not provided a new element will be created.\r\n        */\r\n        this.root = this.config.get('root', this.createRootElement.bind(this));\r\n        \r\n        /**\r\n        * The element used to close the component.\r\n        * @type {HTMLElement}\r\n        */\r\n        this.closeButton = this.config.get('closeButton', this.createCloseButton());\r\n\r\n        if(this.body) {\r\n            this.insertBody();\r\n        }\r\n\r\n        if(this.color) {\r\n            this.setColor();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create the main element.\r\n     * @return {HTMLElement}\r\n     */\r\n    createRootElement() {\r\n        let elem = document.createElement('div');\r\n        elem.classList.add(this.name, 'is-hidden');\r\n        elem.setAttribute('data-bulma-attached', 'attached');\r\n\r\n        this.parent.getElement().appendChild(elem);\r\n\r\n        return elem;\r\n    }\r\n\r\n    /**\r\n     * Show the component.\r\n     * @return {undefined}\r\n     */\r\n    show() {\r\n        this.root.classList.remove('is-hidden');\r\n    }\r\n\r\n    /**\r\n     * Hide the component.\r\n     * @return {undefined}\r\n     */\r\n    hide() {\r\n        this.root.classList.add('is-hidden');\r\n    }\r\n\r\n    /**\r\n     * Insert the body text into the component.\r\n     * @return {undefined}\r\n     */\r\n    insertBody() {\r\n        this.root.innerHTML = this.body;\r\n    }\r\n\r\n    /**\r\n     * Create the element that will be used to close the component.\r\n     * @return {HTMLElement} The newly created close button\r\n     */\r\n    createCloseButton() {\r\n        var closeButton = document.createElement('button');\r\n        closeButton.setAttribute('type', 'button');\r\n        closeButton.classList.add('delete');\r\n\r\n        return closeButton;\r\n    }\r\n\r\n    /**\r\n     * Create an interval to dismiss the component after the set number of ms.\r\n     * @param  {int} interval The time to wait before dismissing the component\r\n     * @return {undefined}\r\n     */\r\n    createDismissInterval(interval) {\r\n        return setInterval(() => {\r\n            this.handleCloseEvent();\r\n        }, interval);\r\n    }\r\n\r\n    /**\r\n     * Insert the close button before our content.\r\n     * @return {undefined}\r\n     */\r\n    prependCloseButton() {\r\n        this.root.insertBefore(this.closeButton, this.root.firstChild);\r\n    }\r\n\r\n    /**\r\n     * Setup the event listener for the close button.\r\n     * @return {undefined}\r\n     */\r\n    setupCloseEvent() {\r\n        this.closeButton.addEventListener('click', this.handleCloseEvent.bind(this));\r\n    }\r\n\r\n    /**\r\n     * Handle the event when our close button is clicked.\r\n     * @return {undefined}\r\n     */\r\n    handleCloseEvent() {\r\n        this.trigger('dismissed');\r\n        \r\n        if(this.destroyOnDismiss) {\r\n            this.destroy();\r\n        } else {\r\n            this.hide();\r\n        }\r\n\r\n        this.trigger('close');\r\n    }\r\n\r\n    /**\r\n     * Set the colour of the component.\r\n     * @return {undefined}\r\n     */\r\n    setColor() {\r\n        this.root.classList.add('is-' + this.color);\r\n    }\r\n\r\n    /**\r\n     * Destroy the component, removing the event listener, interval and element.\r\n     * @return {undefined}\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n        \r\n        if(this.closeButton) {\r\n            this.closeButton.removeEventListener('click', this.handleCloseEvent.bind(this));\r\n        }\r\n\r\n        clearInterval(this.dismissInterval);\r\n\r\n        this.parent.getElement().removeChild(this.root);\r\n        this.parent = null;\r\n        this.root = null;\r\n\r\n        this.trigger('destroyed');\r\n    }\r\n}","import Bulma from '../core';\r\nimport DismissableComponent from '../dismissableComponent';\r\n\r\n/**\r\n * @module Notification\r\n * @since  0.1.0\r\n * @author  Thomas Erbe <vizuaalog@gmail.com>\r\n * @extends DismissableComponent\r\n */\r\nexport class Notification extends DismissableComponent {\r\n    /**\r\n     * Handle parsing the DOMs data attribute API.\r\n     * @param {HTMLElement} element The root element for this instance\r\n     * @return {undefined}\r\n     */\r\n    static parseDocument(context) {\r\n        let elements;\r\n\r\n        if (typeof context.classList === 'object' && context.classList.contains('notification')) {\r\n            elements = [context];\r\n        } else {\r\n            elements = context.querySelectorAll('.notification');\r\n        }\r\n\r\n        Bulma.each(elements, (element) => {\r\n            let bulmaElement = Bulma(element);\r\n\r\n            if (bulmaElement.data('notification')) {\r\n                return;\r\n            }\r\n\r\n            let closeBtn = element.querySelector('.delete');\r\n\r\n            bulmaElement.notification({\r\n                body: null,\r\n                closeButton: closeBtn,\r\n                isDismissable: !!closeBtn,\r\n                destroyOnDismiss: true,\r\n                dismissInterval: element.hasAttribute('data-dismiss-interval') ? element.getAttribute('data-dismiss-interval') : null\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Plugin constructor\r\n     * @param  {Object} config The config object for this plugin\r\n     * @return {this} The newly created instance\r\n     */\r\n    constructor(config, root) {\r\n        super('notification', config, root);\r\n\r\n        // TODO: Move this into the DismissableComponent class. Due to the required\r\n        // changes between different components, we may need a way to trigger this\r\n        // when the component is ready.\r\n        if (this.isDismissable) {\r\n            if (!this.config.has('closeButton')) {\r\n                this.prependCloseButton();\r\n            }\r\n\r\n            this.setupCloseEvent();\r\n        }\r\n\r\n        Bulma(this.root).data('notification', this);\r\n\r\n        this.trigger('init');\r\n    }\r\n}\r\n\r\nBulma.registerPlugin('notification', Notification);\r\n\r\nexport default Bulma;\r\n","import Bulma from '../core';\r\nimport Plugin from '../plugin';\r\n\r\n/**\r\n * @module Navbar\r\n * @since  0.1.0\r\n * @author  Thomas Erbe <vizuaalog@gmail.com>\r\n */\r\nexport class Navbar extends Plugin {\r\n    /**\r\n     * Handle parsing the DOMs data attribute API.\r\n     * @param {HTMLElement} element The root element for this instance\r\n     * @return {undefined}\r\n     */\r\n    static parseDocument(context) {\r\n        let elements;\r\n\r\n        if (typeof context.classList === 'object' && context.classList.contains('navbar')) {\r\n            elements = [context];\r\n        } else {\r\n            elements = context.querySelectorAll('.navbar');\r\n        }\r\n\r\n        Bulma.each(elements, (element) => {\r\n            Bulma(element).navbar({\r\n                sticky: element.hasAttribute('data-sticky') ? true : false,\r\n                stickyOffset: element.hasAttribute('data-sticky-offset') ? element.getAttribute('data-sticky-offset') : 0,\r\n                hideOnScroll: element.hasAttribute('data-hide-on-scroll') ? true : false,\r\n                tolerance: element.hasAttribute('data-tolerance') ? element.getAttribute('data-tolerance') : 0,\r\n                hideOffset: element.hasAttribute('data-hide-offset') ? element.getAttribute('data-hide-offset') : null,\r\n                shadow: element.hasAttribute('data-sticky-shadow') ? true : false\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Returns an object containing the default config for this plugin.\r\n     * @returns {object} The default config object.\r\n     */\r\n    static defaultconfig() {\r\n        return {\r\n            sticky: false,\r\n            stickyOffset: 0,\r\n            hideOnScroll: false,\r\n            tolerance: 0,\r\n            hideOffset: null,\r\n            shadow: false\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Plugin constructor\r\n     * @param  {Object} config The config object for this plugin\r\n     * @return {this} The newly created plugin instance\r\n     */\r\n    constructor(config, root) {\r\n        super(config, root);\r\n\r\n        // Work out the parent if it hasn't been supplied as an option.\r\n        if (this.parent === null) {\r\n            this.parent = this.config.get('root').parentNode;\r\n        }\r\n\r\n        /**\r\n         * The root navbar element.\r\n         * @type {HTMLElement}\r\n         */\r\n        this.root = this.config.get('root');\r\n        this.root.setAttribute('data-bulma-attached', 'attached');\r\n\r\n        /**\r\n         * The element used for the trigger.\r\n         * @type {HTMLElement}\r\n         */\r\n        this.triggerElement = this.root.querySelector('.navbar-burger');\r\n\r\n        /**\r\n         * The target element.\r\n         * @type {HTMLELement}\r\n         */\r\n        this.target = this.root.querySelector('.navbar-menu');\r\n\r\n        /**\r\n         * Should this navbar stick to the top of the page?\r\n         * @type {boolean}\r\n         */\r\n        this.sticky = !!this.config.get('sticky');\r\n\r\n        /**\r\n         * The offset in pixels before the navbar will stick to the top of the page\r\n         * @type {number}\r\n         */\r\n        this.stickyOffset = parseInt(this.config.get('stickyOffset'));\r\n\r\n        /**\r\n         * Should the navbar hide when scrolling? Note: this just applies a 'is-hidden-scroll' class.\r\n         * @type {boolean}\r\n         */\r\n        this.hideOnScroll = !!this.config.get('hideOnScroll');\r\n\r\n        /**\r\n         * The amount of tolerance required before checking the navbar should hide/show\r\n         * @type {number}\r\n         */\r\n        this.tolerance = parseInt(this.config.get('tolerance'));\r\n\r\n        /**\r\n         * Add a shadow when the navbar is sticky?\r\n         * @type {boolean}\r\n         */\r\n        this.shadow = !!this.config.get('shadow');\r\n\r\n        /**\r\n         * The offset in pixels before the navbar will be hidden, defaults to the height of the navbar\r\n         * @type {number}\r\n         */\r\n        this.hideOffset = parseInt(this.config.get('hideOffset', Math.max(this.root.scrollHeight, this.stickyOffset)));\r\n\r\n        /**\r\n         * The last scroll Y known, this is used to calculate scroll direction\r\n         * @type {number}\r\n         */\r\n        this.lastScrollY = 0;\r\n\r\n        /**\r\n         * An array of any navbar dropdowns\r\n         * @type {NodeList}\r\n         */\r\n        this.dropdowns = this.root.querySelectorAll('.navbar-item.has-dropdown:not(.is-hoverable)');\r\n\r\n        /**\r\n         * Bind the relevant event handlers to this instance. So that we can remove them if needed\r\n         */\r\n        this.handleScroll = this.handleScroll.bind(this);\r\n\r\n        Bulma(this.root).data('navbar', this);\r\n\r\n        this.registerEvents();\r\n    }\r\n\r\n    /**\r\n     * Register all the events this module needs.\r\n     * @return {undefined}\r\n     */\r\n    registerEvents() {\r\n        this.triggerElement.addEventListener('click', this.handleTriggerClick.bind(this));\r\n\r\n        if (this.sticky) {\r\n            this.enableSticky();\r\n        }\r\n\r\n        Bulma.each(this.dropdowns, (dropdown) => {\r\n            dropdown.addEventListener('click', this.handleDropdownTrigger);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handle the click event on the trigger.\r\n     * @return {undefined}\r\n     */\r\n    handleTriggerClick() {\r\n        if (this.target.classList.contains('is-active')) {\r\n            this.target.classList.remove('is-active');\r\n            this.triggerElement.classList.remove('is-active');\r\n        } else {\r\n            this.target.classList.add('is-active');\r\n            this.triggerElement.classList.add('is-active');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handle the scroll event\r\n     * @return {undefined}\r\n     */\r\n    handleScroll() {\r\n        this.toggleSticky(window.pageYOffset);\r\n    }\r\n\r\n    /**\r\n     * Handle the click handler for any dropdowns found within the navbar\r\n     */\r\n    handleDropdownTrigger() {\r\n        if (this.classList.contains('is-active')) {\r\n            this.classList.remove('is-active');\r\n        } else {\r\n            this.classList.add('is-active');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Enable the sticky feature by attaching the scroll event.\r\n     */\r\n    enableSticky() {\r\n        window.addEventListener('scroll', this.handleScroll);\r\n        this.root.setAttribute('data-sticky', '');\r\n        this.sticky = true;\r\n    }\r\n\r\n    /**\r\n     * Disable the sticky feature by removing the scroll event.\r\n     */\r\n    disableSticky() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n        this.root.removeAttribute('data-sticky');\r\n        this.sticky = false;\r\n    }\r\n\r\n    /**\r\n     * Enable hide on scroll. Also enable sticky if it's not already.\r\n     */\r\n    enableHideOnScroll() {\r\n        if (!this.sticky) {\r\n            this.enableSticky();\r\n        }\r\n\r\n        this.root.setAttribute('data-hide-on-scroll', '');\r\n        this.hideOnScroll = true;\r\n    }\r\n\r\n    /**\r\n     * Disable hide on scroll, and show the navbar again if it's hidden.\r\n     */\r\n    disableHideOnScroll() {\r\n        this.root.removeAttribute('data-hide-on-scroll');\r\n        this.hideOnScroll = false;\r\n        this.root.classList.remove('is-hidden-scroll');\r\n    }\r\n\r\n    /**\r\n     * Toggle the navbar's sticky state\r\n     * @param {number} scrollY The amount of pixels that has been scrolled\r\n     * @return {undefined}\r\n     */\r\n    toggleSticky(scrollY) {\r\n        if (scrollY > this.stickyOffset) {\r\n            this.root.classList.add('is-fixed-top');\r\n            document.body.classList.add('has-navbar-fixed-top');\r\n\r\n            if (this.shadow) {\r\n                this.root.classList.add('has-shadow');\r\n            }\r\n        } else {\r\n            this.root.classList.remove('is-fixed-top');\r\n            document.body.classList.remove('has-navbar-fixed-top');\r\n\r\n            if (this.shadow) {\r\n                this.root.classList.remove('has-shadow');\r\n            }\r\n        }\r\n\r\n        if (this.hideOnScroll) {\r\n            let scrollDirection = this.calculateScrollDirection(scrollY, this.lastScrollY);\r\n            let triggeredTolerance = this.difference(scrollY, this.lastScrollY) >= this.tolerance;\r\n\r\n            if (scrollDirection === 'down') {\r\n                // only hide the navbar at the top if we reach a certain offset so the hiding is more smooth\r\n                let isBeyondTopOffset = scrollY > this.hideOffset;\r\n                if (triggeredTolerance && isBeyondTopOffset) {\r\n                    this.root.classList.add('is-hidden-scroll');\r\n                }\r\n            } else {\r\n                // if scrolling up to the very top where the navbar would be by default always show it\r\n                let isAtVeryTop = scrollY < this.hideOffset;\r\n                if (triggeredTolerance || isAtVeryTop) {\r\n                    this.root.classList.remove('is-hidden-scroll');\r\n                }\r\n            }\r\n\r\n            this.lastScrollY = scrollY;\r\n        }\r\n    }\r\n\r\n    difference(a, b) {\r\n        if (a > b) {\r\n            return a - b;\r\n        } else {\r\n            return b - a;\r\n        }\r\n    }\r\n\r\n    calculateScrollDirection(currentY, lastY) {\r\n        return currentY >= lastY ? 'down' : 'up';\r\n    }\r\n}\r\n\r\nBulma.registerPlugin('navbar', Navbar);\r\n\r\nexport default Bulma;\r\n","import Bulma from '../core';\r\nimport DismissableComponent from '../dismissableComponent';\r\n\r\n/**\r\n * @module Message\r\n * @since  0.1.0\r\n * @author  Thomas Erbe <vizuaalog@gmail.com>\r\n * @extends DismissableComponent\r\n */\r\nexport class Message extends DismissableComponent {\r\n    /**\r\n     * Handle parsing the DOMs data attribute API.\r\n     * @param {HTMLElement} element The root element for this plugin\r\n     * @return {undefined}\r\n     */\r\n    static parseDocument(context) {\r\n        let elements;\r\n\r\n        if (typeof context.classList === 'object' && context.classList.container('.message')) {\r\n            elements = [context];\r\n        } else {\r\n            elements = context.querySelectorAll('.message');\r\n        }\r\n\r\n        Bulma.each(elements, (element) => {\r\n            let closeBtn = element.querySelector('.delete');\r\n\r\n            Bulma(element).message({\r\n                body: null,\r\n                closeButton: closeBtn,\r\n                isDismissable: !!closeBtn,\r\n                destroyOnDismiss: true,\r\n                dismissInterval: element.hasAttribute('data-dismiss-interval') ? element.getAttribute('data-dismiss-interval') : null\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Plugin constructor\r\n     * @param  {Object} config The config object for this plugin\r\n     * @return {this} The newly created instance\r\n     */\r\n    constructor(config, root) {\r\n        super('message', config, root);\r\n\r\n        /**\r\n         * The size of the message\r\n         * @type {String} Possible values are small, normal, medium or large\r\n         */\r\n        this.size = this.config.get('size');\r\n\r\n        /**\r\n         * The title of the message\r\n         * @type {String}\r\n         */\r\n        this.title = this.config.get('title');\r\n\r\n        if (this.title) {\r\n            this.createMessageHeader();\r\n        }\r\n\r\n        // TODO: Move this into the DismissableComponent class. Due to the required\r\n        // changes between different components, we may need a way to trigger this\r\n        // when the component is ready.\r\n        if (this.isDismissable) {\r\n            if (!this.config.get('closeButton')) {\r\n                this.prependCloseButton();\r\n            }\r\n\r\n            this.setupCloseEvent();\r\n        }\r\n\r\n        if (this.size) {\r\n            this.setSize();\r\n        }\r\n\r\n        Bulma(this.root).data('message', this);\r\n\r\n        this.trigger('init');\r\n    }\r\n\r\n    /**\r\n     * Create the message header\r\n     * @return {undefined}\r\n     */\r\n    createMessageHeader() {\r\n        let header = document.createElement('div');\r\n        header.classList.add('message-header');\r\n\r\n        header.innerHTML = '<p>' + this.title + '</p>';\r\n\r\n        this.title = header;\r\n\r\n        this.root.insertBefore(this.title, this.root.firstChild);\r\n    }\r\n\r\n    /**\r\n     * Set the size of the message.\r\n     * @return {undefined}\r\n     */\r\n    setSize() {\r\n        this.root.classList.add('is-' + this.size);\r\n    }\r\n\r\n    /**\r\n     * Insert the body text into the component.\r\n     * @return {undefined}\r\n     */\r\n    insertBody() {\r\n        let body = document.createElement('div');\r\n        body.classList.add('message-body');\r\n        body.innerHTML = this.body;\r\n\r\n        this.root.appendChild(body);\r\n    }\r\n\r\n    /**\r\n     * Insert the close button before our content.\r\n     * @return {undefined}\r\n     */\r\n    prependCloseButton() {\r\n        this.title.appendChild(this.closeButton);\r\n    }\r\n}\r\n\r\nBulma.registerPlugin('message', Message);\r\n\r\nexport default Bulma;\r\n","import Bulma from '../core';\r\nimport Plugin from '../plugin';\r\n\r\n/**\r\n * @module Dropdown\r\n * @since  0.1.0\r\n * @author  Thomas Erbe <vizuaalog@gmail.com>\r\n */\r\nexport class Dropdown extends Plugin {\r\n    /**\r\n     * Handle parsing the DOMs data attribute API.\r\n     * @param {HtmlElement} element The root element for this instance\r\n     * @return {undefined}\r\n     */\r\n    static parseDocument(context) {\r\n        let elements;\r\n\r\n        if (typeof context.classList === 'object' && context.classList.contains('dropdown')) {\r\n            elements = [context];\r\n        } else {\r\n            elements = context.querySelectorAll('.dropdown');\r\n        }\r\n\r\n        Bulma.each(elements, (element) => {\r\n            Bulma(element).dropdown();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Plugin constructor\r\n     * @param  {Object} config The config object for this plugin\r\n     * @return {this} The newly created instance\r\n     */\r\n    constructor(config, root) {\r\n        super(config, root);\r\n\r\n        /**\r\n         * The root dropdown element.\r\n         * @type {HTMLElement}\r\n         */\r\n        this.root = this.config.get('root');\r\n        this.root.setAttribute('data-bulma-attached', 'attached');\r\n\r\n        /**\r\n         * The element to trigger when clicked.\r\n         * @type {HTMLElement}\r\n         */\r\n        this.triggerElement = this.root.querySelector('.dropdown-trigger');\r\n\r\n        this.registerEvents();\r\n\r\n        Bulma(this.root).data('dropdown', this);\r\n\r\n        this.trigger('init');\r\n    }\r\n\r\n    /**\r\n     * Register all the events this module needs.\r\n     * @return {undefined}\r\n     */\r\n    registerEvents() {\r\n        this.triggerElement.addEventListener('click', this.handleTriggerClick.bind(this));\r\n    }\r\n\r\n    /**\r\n     * Handle the click event on the trigger.\r\n     * @return {undefined}\r\n     */\r\n    handleTriggerClick() {\r\n        if (this.root.classList.contains('is-active')) {\r\n            this.root.classList.remove('is-active');\r\n\r\n            this.trigger('close');\r\n        } else {\r\n            this.root.classList.add('is-active');\r\n\r\n            this.trigger('open');\r\n        }\r\n    }\r\n}\r\n\r\nBulma.registerPlugin('dropdown', Dropdown);\r\n\r\nexport default Bulma;\r\n","import Bulma from '../core';\r\nimport Plugin from '../plugin';\r\n\r\n/**\r\n * @module Modal\r\n * @since  0.1.0\r\n * @author  Thomas Erbe <vizuaalog@gmail.com>\r\n */\r\nexport class Modal extends Plugin {\r\n    /**\r\n     * Handle parsing the DOM.\r\n     * @param {HTMLElement} element The root element for this accordion\r\n     * @return {undefined}\r\n     */\r\n    static parseDocument() {}\r\n\r\n    /**\r\n     * Returns an object containing the default config for this plugin.\r\n     * @returns {object} The default config object.\r\n     */\r\n    static defaultConfig() {\r\n        return {\r\n            style: 'card',\r\n            closable: true\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Plugin constructor\r\n     * @param  {Object} config The config object for this plugin\r\n     * @return {this} The newly created plugin instance\r\n     */\r\n    constructor(config, root) {\r\n        super(config, root);\r\n\r\n        /** @param {string} */\r\n        this.style = this.config.get('style');\r\n\r\n        /** @param {HTMLElement} */\r\n        this.root = this.config.get('root');\r\n        \r\n        if(!this.root.classList.contains('modal')) {\r\n            this.root.classList.add('modal');\r\n        }\r\n\r\n        if(!this.parent) {\r\n            if(!this.root.parentNode) {\r\n                this.parent = document.body;\r\n\r\n                this.parent.appendChild(this.root);\r\n            } else {\r\n                this.parent = this.root.parentNode;\r\n            }\r\n        } else {\r\n            this.parent.appendChild(this.root);\r\n        }\r\n\r\n        /** @param {HTMLElement} */\r\n        this.background = Bulma.findOrCreateElement('.modal-background', this.root);\r\n\r\n        /** @param {HTMLElement} */\r\n        this.content = this.style === 'card' ? Bulma.findOrCreateElement('.modal-card', this.root) : Bulma.findOrCreateElement('.modal-content', this.root);\r\n\r\n        /** @param {boolean} */\r\n        this.closable = this.config.get('closable');\r\n\r\n        /** @param {string|null} */\r\n        this.body = this.config.get('body');\r\n\r\n        /** @param {string|null} */\r\n        this.title = this.config.get('title');\r\n\r\n        if(this.config.get('bodyUrl')) {\r\n            Bulma.ajax(this.config.get('bodyUrl'))\r\n                .then((response) => {\r\n                    this.body = response;\r\n                    this.buildModal();\r\n                });\r\n        } else {\r\n            this.buildModal();\r\n        }\r\n\r\n        Bulma(this.root).data('modal', this);\r\n\r\n        this.trigger('init');\r\n    }\r\n\r\n    // Build the modal's HTML\r\n    buildModal() {\r\n        if(this.style === 'card') {\r\n            this.createCardStructure();\r\n        } else {\r\n            if(!this.content.innerHTML) {\r\n                this.content.innerHTML = this.body;\r\n            }\r\n        }\r\n\r\n        if(this.closable) {\r\n            /** @param {HTMLElement} */\r\n            this.closeButton = this.style === 'card' ? Bulma.findOrCreateElement('.delete', this.header, 'button') : Bulma.findOrCreateElement('.modal-close', this.root, 'button');\r\n        }\r\n\r\n        if(this.style === 'card') {\r\n            this.createButtons();\r\n        }\r\n\r\n        this.setupEvents();\r\n    }\r\n\r\n    /**\r\n     * Create the card style structure\r\n     * @returns {void}\r\n     */\r\n    createCardStructure() {\r\n        /** @param {HTMLElement} */\r\n        this.header = Bulma.findOrCreateElement('.modal-card-head', this.content, 'header');\r\n\r\n        /** @param {HTMLElement} */\r\n        this.headerTitle = Bulma.findOrCreateElement('.modal-card-title', this.header, 'p');\r\n        if(!this.headerTitle.innerHTML) {\r\n            this.headerTitle.innerHTML = this.title;\r\n        }\r\n\r\n        /** @param {HTMLElement} */\r\n        this.cardBody = Bulma.findOrCreateElement('.modal-card-body', this.content, 'section');\r\n        if(!this.cardBody.innerHTML) {\r\n            this.cardBody.innerHTML = this.body;\r\n        }\r\n\r\n        /** @param {HTMLElement} */\r\n        this.footer = Bulma.findOrCreateElement('.modal-card-foot', this.content, 'footer');\r\n    }\r\n\r\n    /**\r\n     * Setup the events used by this modal.\r\n     * @returns {void}\r\n     */\r\n    setupEvents() {\r\n        if(this.closable) {\r\n            this.closeButton.addEventListener('click', this.close.bind(this));\r\n\r\n            this.keyupListenerBound = (evt) => this.keyupListener(evt);\r\n            document.addEventListener('keyup', this.keyupListenerBound);\r\n\r\n            this.background.addEventListener('click', this.close.bind(this));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Go through the provided buttons option and create the buttons.\r\n     * @returns {void}\r\n     */\r\n    createButtons() {\r\n        var buttonsConfig = this.config.get('buttons', []);\r\n        var modal = this;\r\n\r\n        Bulma.each(buttonsConfig, function(buttonConfig) {\r\n            var button = Bulma.createElement('button', buttonConfig.classes);\r\n            button.innerHTML = buttonConfig.label;\r\n\r\n            button.addEventListener('click', function(event) {\r\n                buttonConfig.onClick(event);\r\n            });\r\n\r\n            modal.footer.appendChild(button);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Open the modal\r\n     * @returns {void}\r\n     */\r\n    open() {\r\n        this.root.classList.add('is-active');\r\n        document.documentElement.classList.add('is-clipped');\r\n\r\n        this.trigger('open');\r\n    }\r\n\r\n    /**\r\n     * Close the modal\r\n     * @returns {void} \r\n     */\r\n    close() {\r\n        this.root.classList.remove('is-active');\r\n        document.documentElement.classList.remove('is-clipped');\r\n\r\n        this.trigger('close');\r\n    }\r\n\r\n    keyupListener(event) {\r\n        if(!this.root.classList.contains('is-active')) {\r\n            return;\r\n        }\r\n\r\n        let key = event.key || event.keyCode;\r\n\r\n        if(key === 'Escape' || key === 'Esc' || key === 27) {\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Destroy this modal, unregistering element references and removing the modal.\r\n     * @returns {void}\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n        \r\n        this.root.remove();\r\n\r\n        this.parent = null;\r\n        this.root = null;\r\n        this.background = null;\r\n        this.content = null;\r\n\r\n        if(this.style === 'card') {\r\n            this.header = null;\r\n            this.headerTitle = null;\r\n            this.cardBody = null;\r\n            this.footer = null;\r\n        }\r\n\r\n        if(this.closable) {\r\n            this.closeButton = null;\r\n\r\n            document.removeEventListener('keyup', this.keyupListenerBound);\r\n        }\r\n\r\n        this.config.gets = [];\r\n\r\n        this.trigger('destroyed');\r\n    }\r\n}\r\n\r\nBulma.registerPlugin('modal', Modal);\r\n\r\nexport default Bulma;\r\n","import Bulma from '../core';\r\nimport { Modal } from './modal';\r\n\r\n/**\r\n * @module Alert\r\n * @since  0.8.0\r\n * @author  Thomas Erbe <vizuaalog@gmail.com>\r\n */\r\nexport class Alert extends Modal {\r\n    /**\r\n     * Handle parsing the DOM.\r\n     * @param {HTMLElement} element The root element for this accordion\r\n     * @return {undefined}\r\n     */\r\n    static parseDocument() {}\r\n\r\n    /**\r\n     * Returns an object containing the default config for this plugin.\r\n     * @returns {object} The default config object.\r\n     */\r\n    static defaultConfig() {\r\n        return {\r\n            type: 'info',\r\n            title: '',\r\n            body: '',\r\n            confirm: 'Okay',\r\n            cancel: null,\r\n            style: 'card',\r\n            parent: document.body,\r\n            showHeader: true\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Plugin constructor\r\n     * @param  {Object} config The config object for this plugin\r\n     * @return {this} The newly created plugin instance\r\n     */\r\n    constructor(config, root) {\r\n        super(config, root);\r\n\r\n        this.root.classList.add('alert');\r\n\r\n        Bulma(this.root).data('alert', this);\r\n\r\n        this.trigger('init');\r\n\r\n        this.open();\r\n    }\r\n\r\n    /**\r\n     * Create the alerts structure\r\n     * @returns {void}\r\n     */\r\n    createCardStructure() {\r\n        if(this.config.get('showHeader')) {\r\n            /** @param {HTMLElement} */\r\n            this.header = Bulma.findOrCreateElement('.modal-card-head', this.content, 'header', ['modal-card-head', 'has-background-' + this.config.get('type')]);\r\n\r\n            /** @param {HTMLElement} */\r\n            var textColor = this.config.get('type') == 'warning' ? 'black' : 'white';\r\n            this.headerTitle = Bulma.createElement('p', ['modal-card-title', 'has-text-' + textColor]);\r\n            this.headerTitle.innerHTML = this.title;\r\n            this.header.appendChild(this.headerTitle);\r\n        }\r\n\r\n        /** @param {HTMLElement} */\r\n        this.cardBody = Bulma.findOrCreateElement('.modal-card-body', this.content, 'section');\r\n        if(!this.cardBody.innerHTML) {\r\n            this.cardBody.innerHTML = this.body;\r\n        }\r\n\r\n        /** @param {HTMLElement} */\r\n        this.footer = Bulma.findOrCreateElement('.modal-card-foot', this.content, 'footer');\r\n    }\r\n\r\n    /**\r\n     * Go through the provided buttons option and create the buttons.\r\n     * @returns {void}\r\n     */\r\n    createButtons() {\r\n        var defaultButtonOptions = { close: true, destroy: true, onClick: function() {} };\r\n\r\n        var confirmOptions = this.config.get('confirm');\r\n        if(typeof confirmOptions === 'string') {\r\n            confirmOptions = {\r\n                label: confirmOptions,\r\n                classes: []\r\n            };\r\n        }\r\n        confirmOptions = { ...defaultButtonOptions, ...confirmOptions};\r\n\r\n        var confirmButton = Bulma.createElement('button', ['button', 'is-' + this.config.get('type')].concat(confirmOptions.classes));\r\n        confirmButton.innerHTML = confirmOptions.label;\r\n        confirmButton.addEventListener('click', e => {\r\n            confirmOptions.onClick(e);\r\n\r\n            if(confirmOptions.close) {\r\n                this.close();\r\n            }\r\n\r\n            if(confirmOptions.destroy) {\r\n                this.destroy();\r\n            }\r\n        });\r\n        this.footer.appendChild(confirmButton);\r\n\r\n        if(this.config.get('cancel')) {\r\n            var cancelOptions = this.config.get('cancel');\r\n            if(typeof cancelOptions === 'string') {\r\n                cancelOptions = {\r\n                    label: cancelOptions,\r\n                    classes: []\r\n                };\r\n            }\r\n            cancelOptions = { ...defaultButtonOptions, ...cancelOptions};\r\n\r\n            var cancelButton = Bulma.createElement('button', ['button'].concat(cancelOptions.classes));\r\n            cancelButton.innerHTML = cancelOptions.label;\r\n            cancelButton.addEventListener('click', e => {\r\n                cancelOptions.onClick(e);\r\n\r\n                if(cancelOptions.close) {\r\n                    this.close();\r\n                }\r\n\r\n                if(cancelOptions.destroy) {\r\n                    this.destroy();\r\n                }\r\n            });\r\n            this.footer.appendChild(cancelButton);\r\n        }\r\n    }\r\n}\r\n\r\nBulma.registerPlugin('alert', Alert);\r\n\r\nexport default Bulma;\r\n","import Bulma from '../core';\r\nimport Plugin from '../plugin';\r\n\r\n/**\r\n * @module File\r\n * @since  0.1.0\r\n * @author  Thomas Erbe <vizuaalog@gmail.com>\r\n */\r\nexport class File extends Plugin {\r\n    /**\r\n     * Handle parsing the DOMs data attribute API.\r\n     * @param {HTMLElement} element The root element for this plugin\r\n     * @return {undefined}\r\n     */\r\n    static parseDocument(context) {\r\n        let elements;\r\n\r\n        if (typeof context.classList === 'object' && context.classList.contains('file')) {\r\n            elements = [context];\r\n        } else {\r\n            elements = context.querySelectorAll('.file');\r\n        }\r\n\r\n        Bulma.each(elements, (element) => {\r\n            Bulma(element).file();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Plugin constructor\r\n     * @param  {Object} config The config object for this plugin\r\n     * @return {this} The newly created plugin instance\r\n     */\r\n    constructor(config, root) {\r\n        super(config, root);\r\n\r\n        /**\r\n         * The root file element.\r\n         * @type {HTMLElement}\r\n         */\r\n        this.root = this.config.get('root');\r\n        this.root.setAttribute('data-bulma-attached', 'attached');\r\n\r\n        /**\r\n         * The element to use as the trigger.\r\n         * @type {HTMLELement}\r\n         */\r\n        this.input = this.root.querySelector('input');\r\n\r\n        /**\r\n         * The element to show the file name.\r\n         * @type {HTMLElement}\r\n         */\r\n        this.filename = this.root.querySelector('.file-name');\r\n\r\n        this.registerEvents();\r\n\r\n        Bulma(this.root).data('file', this);\r\n\r\n        this.trigger('init');\r\n    }\r\n\r\n    /**\r\n     * Register all the events this module needs.\r\n     * @return {undefined}\r\n     */\r\n    registerEvents() {\r\n        if (this.filename) {\r\n            this.input.addEventListener('change', this.handleTriggerChange.bind(this));\r\n        }\r\n\r\n        this.root.addEventListener('dragover', (e) => {\r\n            e.preventDefault();\r\n            this.addHoverClass();\r\n        });\r\n\r\n        this.root.addEventListener('dragleave', (e) => {\r\n            e.preventDefault();\r\n            this.addHoverClass();\r\n        });\r\n\r\n        this.root.addEventListener('drop', (e) => {\r\n            e.preventDefault();\r\n            this.removeHoverClass();\r\n            this.input.files = e.dataTransfer.files;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handle the click event on the trigger.\r\n     * @param  {Object} event The event object\r\n     * @return {undefined}\r\n     */\r\n    handleTriggerChange(event) {\r\n        if (event.target.files.length === 0) {\r\n            this.clearFileName();\r\n        }\r\n\r\n        if (event.target.files.length === 1) {\r\n            this.setFileName(event.target.files[0].name);\r\n        }\r\n\r\n        if (event.target.files.length > 1) {\r\n            this.setFileName(event.target.files.length + ' files');\r\n        }\r\n\r\n        this.trigger('changed', event);\r\n    }\r\n\r\n    /**\r\n     * Clear the file name element.\r\n     * @return {undefined}\r\n     */\r\n    clearFileName() {\r\n        this.filename.innerHTML = '';\r\n    }\r\n\r\n    /**\r\n     * Get the selected file's name\r\n     * \r\n     * @returns {string}\r\n     */\r\n    getFilename() {\r\n        return this.filename.innerHTML;\r\n    }\r\n\r\n    /**\r\n     * Set the text for the file name element.\r\n     * @param {string} value The name of the file to update the label with\r\n     * @return {undefined}\r\n     */\r\n    setFileName(value) {\r\n        this.filename.innerHTML = value;\r\n    }\r\n\r\n    /**\r\n     * Add hover class to root element.\r\n     * @return {undefined}\r\n     */\r\n    addHoverClass() {\r\n        this.root.classList.add('is-hovered');\r\n    }\r\n\r\n    /**\r\n     * Remove hover class from root element.\r\n     * @return {undefined}\r\n     */\r\n    removeHoverClass() {\r\n        this.root.classList.remove('is-hovered');\r\n    }\r\n}\r\n\r\nBulma.registerPlugin('file', File);\r\n\r\nexport default Bulma;\r\n","import Bulma from '../core';\r\nimport Plugin from '../plugin';\r\n\r\n/**\r\n * @module Tabs\r\n * @since  0.4.0\r\n * @author  Thomas Erbe <vizuaalog@gmail.com>\r\n */\r\nexport class Tabs extends Plugin {\r\n    /**\r\n     * Handle parsing the DOMs data attribute API.\r\n     * @param {HTMLElement} element The root element for this instance\r\n     * @returns {undefined}\r\n     */\r\n    static parseDocument(context) {\r\n        let elements;\r\n\r\n        if (typeof context.classList === 'object' && context.classList.has('tabs-wrapper')) {\r\n            elements = [context];\r\n        } else {\r\n            elements = context.querySelectorAll('.tabs-wrapper');\r\n        }\r\n\r\n        Bulma.each(elements, (element) => {\r\n            Bulma(element).tabs({\r\n                hover: element.hasAttribute('data-hover') ? true : false\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Returns an object containing the default config for this plugin.\r\n     * @returns {object} The default config object.\r\n     */\r\n    static defaultConfig() {\r\n        return {\r\n            hover: false\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Plugin constructor\r\n     * @param  {Object} config The config object for this plugin\r\n     * @return {this} The newly created instance\r\n     */\r\n    constructor(config, root) {\r\n        super(config, root);\r\n\r\n        /**\r\n         * The root tab element\r\n         * @param {HTMLElement}\r\n         */\r\n        this.root = this.config.get('root');\r\n        this.root.setAttribute('data-bulma-attached', 'attached');\r\n\r\n        /**\r\n         * Whether the tabs should be changed when the nav item is hovered over\r\n         * @param {boolean}\r\n         */\r\n        this.hover = this.config.get('hover');\r\n\r\n        /**\r\n         * The tab nav container\r\n         * @param {HTMLElement}\r\n         */\r\n        this.nav = this.findNav();\r\n\r\n        /**\r\n         * The tab's nav items\r\n         * @param {HTMLElement[]}\r\n         */\r\n        this.navItems = this.findNavItems();\r\n\r\n        /**\r\n         * The tab content container\r\n         * @param {HTMLElement}\r\n         */\r\n        this.content = this.findContent();\r\n\r\n        /**\r\n         * The tab's content items\r\n         * @param {HTMLElement[]}\r\n         */\r\n        this.contentItems = this.findContentItems();\r\n\r\n        this.setupNavEvents();\r\n\r\n        Bulma(this.root).data('tabs', this);\r\n\r\n        this.trigger('init');\r\n    }\r\n\r\n    /**\r\n     * Find the tab navigation container.\r\n     * @returns {HTMLElement} The navigation container\r\n     */\r\n    findNav() {\r\n        return this.root.querySelector('.tabs');\r\n    }\r\n\r\n    /**\r\n     * Find each individual tab item\r\n     * @returns {HTMLElement[]} An array of the found items\r\n     */\r\n    findNavItems() {\r\n        return this.nav.querySelectorAll('li');\r\n    }\r\n\r\n    /**\r\n     * Find the tab content container.\r\n     * @returns {HTMLElement} The content container\r\n     */\r\n    findContent() {\r\n        return this.root.querySelector('.tabs-content');\r\n    }\r\n\r\n    /**\r\n     * Find each individual content item\r\n     * @returns {HTMLElement[]} An array of the found items\r\n     */\r\n    findContentItems() {\r\n        // We have to use the root here as the querySelectorAll API doesn't\r\n        // support using '>' as the first character. So we have to have a\r\n        // class to start with.\r\n        return this.root.querySelectorAll('.tabs-content > ul > li');\r\n    }\r\n\r\n    /**\r\n     * Setup the events to handle tab changing\r\n     * @returns {void}\r\n     */\r\n    setupNavEvents() {\r\n        Bulma.each(this.navItems, (navItem, index) => {\r\n            navItem.addEventListener('click', () => {\r\n                this.setActive(index);\r\n            });\r\n\r\n            if (this.hover) {\r\n                navItem.addEventListener('mouseover', () => {\r\n                    this.setActive(index);\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Set the provided tab's index as the active tab.\r\n     * \r\n     * @param {integer} index The new index to set\r\n     */\r\n    setActive(index) {\r\n        Bulma.each(this.navItems, (navItem) => {\r\n            navItem.classList.remove('is-active');\r\n        });\r\n\r\n        Bulma.each(this.contentItems, (contentItem) => {\r\n            contentItem.classList.remove('is-active');\r\n        });\r\n\r\n        this.navItems[index].classList.add('is-active');\r\n        this.contentItems[index].classList.add('is-active');\r\n    }\r\n}\r\n\r\nBulma.registerPlugin('tabs', Tabs);\r\n\r\nexport default Bulma;\r\n","import Bulma from '../core';\nimport Plugin from '../plugin';\n\n/**\n * @module PanelTabs\n * @since  0.12.0\n * @author  Thomas Erbe <vizuaalog@gmail.com>\n */\nexport class PanelTabs extends Plugin {\n    /**\n     * Handle parsing the DOMs data attribute API.\n     * @param {HTMLElement} context The root element for this instance\n     * @returns {undefined}\n     */\n    static parseDocument(context) {\n        let elements;\n\n        if (typeof context.classList === 'object' && context.classList.contains('panel')) {\n            elements = [context];\n        } else {\n            elements = context.querySelectorAll('.panel');\n        }\n\n        Bulma.each(elements, (element) => {\n            if(element.querySelector('.panel-tabs') === null) {\n                return;\n            }\n\n            Bulma(element).panelTabs();\n        });\n    }\n\n    /**\n     * Returns an object containing the default config for this plugin.\n     * @returns {object} The default config object.\n     */\n    static defaultConfig() {\n        return {};\n    }\n\n    /**\n     * Plugin constructor\n     * @param  {Object} config The config object for this plugin\n     * @return {this} The newly created instance\n     */\n    constructor(config, root) {\n        super(config, root);\n\n        /**\n         * The root tab element\n         * @param {HTMLElement}\n         */\n        this.root = this.config.get('root');\n        this.root.setAttribute('data-bulma-attached', 'attached');\n\n        /**\n         * The tab nav container\n         * @param {HTMLElement}\n         */\n        this.nav = this.findNav();\n\n        /**\n         * The tab's nav items\n         * @param {HTMLElement[]}\n         */\n        this.navItems = this.findNavItems();\n\n        /**\n         * The tab's content items\n         * @param {HTMLElement[]}\n         */\n        this.contentItems = this.findContentItems();\n\n        this.setupNavEvents();\n\n        this.on('init', this.showActiveTab.bind(this));\n\n        Bulma(this.root).data('panelTabs', this);\n\n        this.trigger('init');\n    }\n\n    /**\n     * Find the tab navigation container.\n     * @returns {HTMLElement} The navigation container\n     */\n    findNav() {\n        return this.root.querySelector('.panel-tabs');\n    }\n\n    /**\n     * Find each individual tab item\n     * @returns {NodeListOf<Element>} An array of the found items\n     */\n    findNavItems() {\n        return this.nav.querySelectorAll('a');\n    }\n\n    /**\n     * Find each individual content item\n     * @returns {NodeListOf<Element>} An array of the found items\n     */\n    findContentItems() {\n        return this.root.querySelectorAll('.panel-block[data-category]');\n    }\n\n    /**\n     * Setup the events to handle tab changing\n     * @returns {void}\n     */\n    setupNavEvents() {\n        Bulma.each(this.navItems, (navItem) => {\n            navItem.addEventListener('click', () => {\n                this.setActive(navItem.getAttribute('data-target'));\n            });\n        });\n    }\n\n    /**\n     * Show the correct category and mark the tab as active.\n     * \n     * @param {string|null} category The new category to set\n     */\n    setActive(category) {\n        this.navItems.forEach((item) => {\n            if(item.getAttribute('data-target') === category) {\n                item.classList.add('is-active');\n            } else {\n                item.classList.remove('is-active');\n            }\n        });\n\n        this.contentItems.forEach((item) => {\n            if(item.getAttribute('data-category') === category || category === null) {\n                item.classList.remove('is-hidden');\n            } else {\n                item.classList.add('is-hidden');\n            }\n        });\n    }\n\n    /**\n     * This is called on init and will setup the panel tabs for the current active tab, if any\n     */\n    showActiveTab() {\n        let activeNavFound = false;\n\n        Bulma.each(this.navItems, (navItem) => {\n            if(navItem.classList.contains('is-active')) {\n                this.setActive(navItem.getAttribute('data-target'));\n                activeNavFound = true;\n            }\n        });\n\n        // If no nav item has is-active then use the first one\n        if(!activeNavFound) {\n            this.setActive(this.navItems[0].getAttribute('data-target'));\n        }\n    }\n}\n\nBulma.registerPlugin('panelTabs', PanelTabs);\n\nexport default Bulma;\n","//import Bulma from '../../node_modules/@vizuaalog/bulmajs';\nimport Bulma from '@vizuaalog/bulmajs';\n\nimport SuperTokens from 'supertokens-website';\n\nSuperTokens.init({\n  apiDomain: \"https://localhost\",\n  apiBasePath: \"/auth\"\n});\n"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","Object","defineProperty","exports","processLock_1","LOCK_STORAGE_KEY","delay","milliseconds","setTimeout","generateRandomString","CHARS","randomstring","i","Math","floor","random","SuperTokensLock","acquiredIatSet","Set","id","Date","now","toString","acquireLock","bind","releaseLock","releaseLock__private__","waitForSomethingToChange","refreshLockWhileAcquired","undefined","waiters","prototype","lockKey","timeout","iat","MAX_TIME","STORAGE_KEY","STORAGE","TIMEOUT_KEY","lockObjPostDelay","_a","window","localStorage","getItem","setItem","JSON","stringify","timeoutKey","timeAcquired","timeRefreshed","parse","add","lockCorrector","storageKey","_this","lockObj","default","lock","has","unlock","resolvedCalled","startedAt","removedListeners","stopWaiting","removeEventListener","removeFromWaiting","clearTimeout","timeOutId","timeToWait","addEventListener","addToWaiting","max","func","filter","notifyWaiters","slice","forEach","delete","removeItem","MIN_ALLOWED_TIME","KEYS","keys","LOCK_KEY","includes","ProcessLocking","locked","Map","addToLocked","key","toAdd","callbacks","get","set","unshift","isLocked","toCall","getInstance","instance","__assign","assign","s","arguments","p","hasOwnProperty","getProxyObject","orig","ret","_call","__","Error","_loop_1","k","args","_i","keys_1","OverrideableBuilder","getProxyObject_1","originalImplementation","layers","proxies","override","overrideFunc","proxy","layer","build","_b","_c","proxyInd","this_1","fname","__esModule","m","__export","throw","return","axiosError_1","fetch_1","processState_1","utils_1","getUrlFromConfig","config","url","baseURL","charAt","substr","interceptorFunctionRequestFulfilled","doNotDoInterception","preRequestIdToken","configWithAntiCsrf","antiCsrfToken","shouldDoInterceptionBasedOnUrl","apiDomain","cookieDomain","err","message","location","origin","ProcessState","addState","PROCESS_STATE","CALLING_INTERCEPTION_REQUEST","getIdRefreshToken","status","AntiCsrfToken","getToken","token","headers","autoAddCredentials","withCredentials","rid","responseInterceptor","axiosInstance","response","idRefreshToken","tok","frontToken","initCalled","CALLING_INTERCEPTION_RESPONSE","setIdRefreshToken","sessionExpiredStatusCode","AuthHttpRequest","doRequest","FrontToken","removeToken","responseErrorInterceptor","error","httpCall","prevResponse","prevError","viaInterceptor","returnObj","localPrevError","localPrevResponse","err_1","refreshResult","_d","onUnauthorisedResponse","createAxiosErrorFromFetchResp","createAxiosErrorFromAxiosResp","enhanceAxiosError","code","request","isAxiosError","toJSON","name","description","number","fileName","lineNumber","columnNumber","stack","contentType","data","axiosResponse","text","json","blob","statusText","version_1","browser_tabs_lock_1","associatedIdRefreshToken","antiCsrf","tokenInfo","getAntiCSRFToken","setAntiCSRF","getTokenInfo","getFrontToken","decodeURIComponent","escape","atob","setFrontToken","init","recipeImpl","env","getWindowOrThrow","fetch","refreshTokenUrl","apiBasePath","signOutUrl","__supertokensOriginalFetch","__supertokensSessionRecipe","addFetchInterceptorsAndReturnModifiedFetch","clonedHeaders","retry","Headers","credentials","attemptRefreshingSession","refresh","postLockID","antiCsrfToken_1","preAPIResult","removeIdRefreshToken","error_1","idCookieValue","onHandleEvent","action","sessionExpiredOrRevoked","supported_fdi","join","preAPIHook","requestInit","method","tryRefresh","getIdRefreshTokenFromLocal","parts","document","cookie","split","last","shift","getIDFromCookieOld","statusCode","domain","expires","cookieVal","splitted","Number","toUTCString","hostname","ID_REFRESH_TOKEN_NAME","isInIframe","setIDToCookie","sessionScope","temp","getAntiCSRFromCookie","antiCSRFToken","ANTI_CSRF_NAME","setAntiCSRFToCookie","getFrontTokenFromCookie","FRONT_TOKEN_NAME","setFrontTokenToCookie","recipeImplementation_1","supertokens_js_override_1","options","validateAndNormaliseInputOrThrowError","functions","axiosInterceptorQueue","getUserId","getAccessTokenPayloadSecurely","doesSessionExist","addAxiosInterceptors","signOut","isAnIpAddress","ipaddress","test","normaliseURLDomainOrThrowError","input","ignoreProtocol","trim","startsWith","urlObj","URL","host","protocol","indexOf","getAsStringDangerous","normaliseURLPathOrThrowError","pathname","domainGiven","NormalisedURLPath","other","appendPath","history","state","process","TEST_MODE","ignored","getEventByLastEventByName","reset","waitForEvent","timeInMS","startTime","actualThis","tryAndGet","axios_1","originalFetch","clone","requestInterceptors","interceptors","handlers","use","uid","ate","up","resp","normalisedURLDomain_1","normalisedURLPath_1","normaliseSessionScopeOrThrowError","noDotNormalised","toLowerCase","helper","context","oI","toCheckUrl","port","apiUrlObj","str","normalisedCookieDomain","portStr","isNaN","parseFloat","endsWith","package_version","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","getter","d","a","definition","o","enumerable","globalThis","Function","obj","prop","Data","constructor","_data","destroy","selector","HTMLElement","_elem","querySelector","createElement","VERSION","getTime","cache","plugins","create","handler","registerPlugin","plugin","priority","parseDocument","root","sortedPlugins","sort","b","each","console","classes","elem","className","classList","findOrCreateElement","query","parent","elemName","item","newElem","appendChild","objects","callback","ajax","XMLHttpRequest","open","onload","_stripScripts","responseText","onerror","send","htmlString","div","innerHTML","scripts","getElementsByTagName","parentNode","removeChild","replace","getGlobalConfig","defaultValue","bulmaOptions","destroyData","getElement","ConfigBag","initialConfig","_items","Plugin","static","defaultConfig","_events","on","event","trigger","DismissableComponent","isDismissable","destroyOnDismiss","element","contains","super","color","dismissInterval","createDismissInterval","createRootElement","closeButton","createCloseButton","insertBody","setColor","setAttribute","show","remove","hide","interval","setInterval","handleCloseEvent","prependCloseButton","insertBefore","firstChild","setupCloseEvent","clearInterval","elements","querySelectorAll","bulmaElement","closeBtn","notification","hasAttribute","getAttribute","navbar","sticky","stickyOffset","hideOnScroll","tolerance","hideOffset","shadow","triggerElement","target","parseInt","scrollHeight","lastScrollY","dropdowns","handleScroll","registerEvents","handleTriggerClick","enableSticky","dropdown","handleDropdownTrigger","toggleSticky","pageYOffset","disableSticky","removeAttribute","enableHideOnScroll","disableHideOnScroll","scrollY","scrollDirection","calculateScrollDirection","triggeredTolerance","difference","isBeyondTopOffset","isAtVeryTop","currentY","lastY","container","size","title","createMessageHeader","setSize","header","Modal","style","closable","background","content","buildModal","createCardStructure","createButtons","setupEvents","headerTitle","cardBody","footer","close","keyupListenerBound","evt","keyupListener","buttonsConfig","modal","buttonConfig","button","onClick","documentElement","keyCode","gets","type","confirm","cancel","showHeader","textColor","defaultButtonOptions","confirmOptions","confirmButton","concat","cancelOptions","cancelButton","file","filename","handleTriggerChange","preventDefault","addHoverClass","removeHoverClass","files","dataTransfer","clearFileName","setFileName","getFilename","tabs","hover","nav","findNav","navItems","findNavItems","findContent","contentItems","findContentItems","setupNavEvents","navItem","index","setActive","contentItem","panelTabs","showActiveTab","category","activeNavFound"],"sourceRoot":""}